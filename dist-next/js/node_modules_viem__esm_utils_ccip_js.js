"use strict";
(globalThis["webpackChunk_core_ext_next"] = globalThis["webpackChunk_core_ext_next"] || []).push([["node_modules_viem__esm_utils_ccip_js"], {
"../../node_modules/viem/_esm/errors/ccip.js": (function (__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  OffchainLookupError: () => (OffchainLookupError),
  OffchainLookupResponseMalformedError: () => (OffchainLookupResponseMalformedError),
  OffchainLookupSenderMismatchError: () => (OffchainLookupSenderMismatchError)
});
/* ESM import */var _utils_stringify_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("../../node_modules/viem/_esm/utils/stringify.js");
/* ESM import */var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../../node_modules/viem/_esm/errors/base.js");
/* ESM import */var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../../node_modules/viem/_esm/errors/utils.js");



class OffchainLookupError extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseError {
    constructor({ callbackSelector, cause, data, extraData, sender, urls, }) {
        super(cause.shortMessage ||
            'An error occurred while fetching for an offchain result.', {
            cause,
            metaMessages: [
                ...(cause.metaMessages || []),
                cause.metaMessages?.length ? '' : [],
                'Offchain Gateway Call:',
                urls && [
                    '  Gateway URL(s):',
                    ...urls.map((url) => `    ${(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getUrl)(url)}`),
                ],
                `  Sender: ${sender}`,
                `  Data: ${data}`,
                `  Callback selector: ${callbackSelector}`,
                `  Extra data: ${extraData}`,
            ].flat(),
        });
        Object.defineProperty(this, "name", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 'OffchainLookupError'
        });
    }
}
class OffchainLookupResponseMalformedError extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseError {
    constructor({ result, url }) {
        super('Offchain gateway response is malformed. Response data must be a hex value.', {
            metaMessages: [
                `Gateway URL: ${(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getUrl)(url)}`,
                `Response: ${(0,_utils_stringify_js__WEBPACK_IMPORTED_MODULE_2__.stringify)(result)}`,
            ],
        });
        Object.defineProperty(this, "name", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 'OffchainLookupResponseMalformedError'
        });
    }
}
class OffchainLookupSenderMismatchError extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseError {
    constructor({ sender, to }) {
        super('Reverted sender address does not match target contract address (`to`).', {
            metaMessages: [
                `Contract address: ${to}`,
                `OffchainLookup sender address: ${sender}`,
            ],
        });
        Object.defineProperty(this, "name", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 'OffchainLookupSenderMismatchError'
        });
    }
}
//# sourceMappingURL=ccip.js.map

}),
"../../node_modules/viem/_esm/utils/ccip.js": (function (__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ccipRequest: () => (ccipRequest),
  offchainLookup: () => (offchainLookup),
  offchainLookupAbiItem: () => (offchainLookupAbiItem),
  offchainLookupSignature: () => (offchainLookupSignature)
});
/* ESM import */var _actions_public_call_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("../../node_modules/viem/_esm/actions/public/call.js");
/* ESM import */var _errors_ccip_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("../../node_modules/viem/_esm/errors/ccip.js");
/* ESM import */var _errors_request_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("../../node_modules/viem/_esm/errors/request.js");
/* ESM import */var _abi_decodeErrorResult_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../../node_modules/viem/_esm/utils/abi/decodeErrorResult.js");
/* ESM import */var _abi_encodeAbiParameters_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("../../node_modules/viem/_esm/utils/abi/encodeAbiParameters.js");
/* ESM import */var _address_isAddressEqual_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../../node_modules/viem/_esm/utils/address/isAddressEqual.js");
/* ESM import */var _data_concat_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("../../node_modules/viem/_esm/utils/data/concat.js");
/* ESM import */var _data_isHex_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("../../node_modules/viem/_esm/utils/data/isHex.js");
/* ESM import */var _stringify_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("../../node_modules/viem/_esm/utils/stringify.js");









const offchainLookupSignature = '0x556f1830';
const offchainLookupAbiItem = {
    name: 'OffchainLookup',
    type: 'error',
    inputs: [
        {
            name: 'sender',
            type: 'address',
        },
        {
            name: 'urls',
            type: 'string[]',
        },
        {
            name: 'callData',
            type: 'bytes',
        },
        {
            name: 'callbackFunction',
            type: 'bytes4',
        },
        {
            name: 'extraData',
            type: 'bytes',
        },
    ],
};
async function offchainLookup(client, { blockNumber, blockTag, data, to, }) {
    const { args } = (0,_abi_decodeErrorResult_js__WEBPACK_IMPORTED_MODULE_0__.decodeErrorResult)({
        data,
        abi: [offchainLookupAbiItem],
    });
    const [sender, urls, callData, callbackSelector, extraData] = args;
    const { ccipRead } = client;
    const ccipRequest_ = ccipRead && typeof ccipRead?.request === 'function'
        ? ccipRead.request
        : ccipRequest;
    try {
        if (!(0,_address_isAddressEqual_js__WEBPACK_IMPORTED_MODULE_1__.isAddressEqual)(to, sender))
            throw new _errors_ccip_js__WEBPACK_IMPORTED_MODULE_2__.OffchainLookupSenderMismatchError({ sender, to });
        const result = await ccipRequest_({ data: callData, sender, urls });
        const { data: data_ } = await (0,_actions_public_call_js__WEBPACK_IMPORTED_MODULE_3__.call)(client, {
            blockNumber,
            blockTag,
            data: (0,_data_concat_js__WEBPACK_IMPORTED_MODULE_4__.concat)([
                callbackSelector,
                (0,_abi_encodeAbiParameters_js__WEBPACK_IMPORTED_MODULE_5__.encodeAbiParameters)([{ type: 'bytes' }, { type: 'bytes' }], [result, extraData]),
            ]),
            to,
        });
        return data_;
    }
    catch (err) {
        throw new _errors_ccip_js__WEBPACK_IMPORTED_MODULE_2__.OffchainLookupError({
            callbackSelector,
            cause: err,
            data,
            extraData,
            sender,
            urls,
        });
    }
}
async function ccipRequest({ data, sender, urls, }) {
    let error = new Error('An unknown error occurred.');
    for (let i = 0; i < urls.length; i++) {
        const url = urls[i];
        const method = url.includes('{data}') ? 'GET' : 'POST';
        const body = method === 'POST' ? { data, sender } : undefined;
        try {
            const response = await fetch(url.replace('{sender}', sender).replace('{data}', data), {
                body: JSON.stringify(body),
                method,
            });
            let result;
            if (response.headers.get('Content-Type')?.startsWith('application/json')) {
                result = (await response.json()).data;
            }
            else {
                result = (await response.text());
            }
            if (!response.ok) {
                error = new _errors_request_js__WEBPACK_IMPORTED_MODULE_6__.HttpRequestError({
                    body,
                    details: result?.error
                        ? (0,_stringify_js__WEBPACK_IMPORTED_MODULE_7__.stringify)(result.error)
                        : response.statusText,
                    headers: response.headers,
                    status: response.status,
                    url,
                });
                continue;
            }
            if (!(0,_data_isHex_js__WEBPACK_IMPORTED_MODULE_8__.isHex)(result)) {
                error = new _errors_ccip_js__WEBPACK_IMPORTED_MODULE_2__.OffchainLookupResponseMalformedError({
                    result,
                    url,
                });
                continue;
            }
            return result;
        }
        catch (err) {
            error = new _errors_request_js__WEBPACK_IMPORTED_MODULE_6__.HttpRequestError({
                body,
                details: err.message,
                url,
            });
        }
    }
    throw error;
}
//# sourceMappingURL=ccip.js.map

}),

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvbm9kZV9tb2R1bGVzX3ZpZW1fX2VzbV91dGlsc19jY2lwX2pzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGNvcmUtZXh0L25leHQvLi4vLi4vbm9kZV9tb2R1bGVzL3ZpZW0vX2VzbS9lcnJvcnMvY2NpcC5qcyIsIndlYnBhY2s6Ly9AY29yZS1leHQvbmV4dC8uLi8uLi9ub2RlX21vZHVsZXMvdmllbS9fZXNtL3V0aWxzL2NjaXAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi4vdXRpbHMvc3RyaW5naWZ5LmpzJztcbmltcG9ydCB7IEJhc2VFcnJvciB9IGZyb20gJy4vYmFzZS5qcyc7XG5pbXBvcnQgeyBnZXRVcmwgfSBmcm9tICcuL3V0aWxzLmpzJztcbmV4cG9ydCBjbGFzcyBPZmZjaGFpbkxvb2t1cEVycm9yIGV4dGVuZHMgQmFzZUVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGNhbGxiYWNrU2VsZWN0b3IsIGNhdXNlLCBkYXRhLCBleHRyYURhdGEsIHNlbmRlciwgdXJscywgfSkge1xuICAgICAgICBzdXBlcihjYXVzZS5zaG9ydE1lc3NhZ2UgfHxcbiAgICAgICAgICAgICdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBmb3IgYW4gb2ZmY2hhaW4gcmVzdWx0LicsIHtcbiAgICAgICAgICAgIGNhdXNlLFxuICAgICAgICAgICAgbWV0YU1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgLi4uKGNhdXNlLm1ldGFNZXNzYWdlcyB8fCBbXSksXG4gICAgICAgICAgICAgICAgY2F1c2UubWV0YU1lc3NhZ2VzPy5sZW5ndGggPyAnJyA6IFtdLFxuICAgICAgICAgICAgICAgICdPZmZjaGFpbiBHYXRld2F5IENhbGw6JyxcbiAgICAgICAgICAgICAgICB1cmxzICYmIFtcbiAgICAgICAgICAgICAgICAgICAgJyAgR2F0ZXdheSBVUkwocyk6JyxcbiAgICAgICAgICAgICAgICAgICAgLi4udXJscy5tYXAoKHVybCkgPT4gYCAgICAke2dldFVybCh1cmwpfWApLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgYCAgU2VuZGVyOiAke3NlbmRlcn1gLFxuICAgICAgICAgICAgICAgIGAgIERhdGE6ICR7ZGF0YX1gLFxuICAgICAgICAgICAgICAgIGAgIENhbGxiYWNrIHNlbGVjdG9yOiAke2NhbGxiYWNrU2VsZWN0b3J9YCxcbiAgICAgICAgICAgICAgICBgICBFeHRyYSBkYXRhOiAke2V4dHJhRGF0YX1gLFxuICAgICAgICAgICAgXS5mbGF0KCksXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAnT2ZmY2hhaW5Mb29rdXBFcnJvcidcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE9mZmNoYWluTG9va3VwUmVzcG9uc2VNYWxmb3JtZWRFcnJvciBleHRlbmRzIEJhc2VFcnJvciB7XG4gICAgY29uc3RydWN0b3IoeyByZXN1bHQsIHVybCB9KSB7XG4gICAgICAgIHN1cGVyKCdPZmZjaGFpbiBnYXRld2F5IHJlc3BvbnNlIGlzIG1hbGZvcm1lZC4gUmVzcG9uc2UgZGF0YSBtdXN0IGJlIGEgaGV4IHZhbHVlLicsIHtcbiAgICAgICAgICAgIG1ldGFNZXNzYWdlczogW1xuICAgICAgICAgICAgICAgIGBHYXRld2F5IFVSTDogJHtnZXRVcmwodXJsKX1gLFxuICAgICAgICAgICAgICAgIGBSZXNwb25zZTogJHtzdHJpbmdpZnkocmVzdWx0KX1gLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6ICdPZmZjaGFpbkxvb2t1cFJlc3BvbnNlTWFsZm9ybWVkRXJyb3InXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBPZmZjaGFpbkxvb2t1cFNlbmRlck1pc21hdGNoRXJyb3IgZXh0ZW5kcyBCYXNlRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHsgc2VuZGVyLCB0byB9KSB7XG4gICAgICAgIHN1cGVyKCdSZXZlcnRlZCBzZW5kZXIgYWRkcmVzcyBkb2VzIG5vdCBtYXRjaCB0YXJnZXQgY29udHJhY3QgYWRkcmVzcyAoYHRvYCkuJywge1xuICAgICAgICAgICAgbWV0YU1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgYENvbnRyYWN0IGFkZHJlc3M6ICR7dG99YCxcbiAgICAgICAgICAgICAgICBgT2ZmY2hhaW5Mb29rdXAgc2VuZGVyIGFkZHJlc3M6ICR7c2VuZGVyfWAsXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogJ09mZmNoYWluTG9va3VwU2VuZGVyTWlzbWF0Y2hFcnJvcidcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2NpcC5qcy5tYXAiLCJpbXBvcnQgeyBjYWxsIH0gZnJvbSAnLi4vYWN0aW9ucy9wdWJsaWMvY2FsbC5qcyc7XG5pbXBvcnQgeyBPZmZjaGFpbkxvb2t1cEVycm9yLCBPZmZjaGFpbkxvb2t1cFJlc3BvbnNlTWFsZm9ybWVkRXJyb3IsIE9mZmNoYWluTG9va3VwU2VuZGVyTWlzbWF0Y2hFcnJvciwgfSBmcm9tICcuLi9lcnJvcnMvY2NpcC5qcyc7XG5pbXBvcnQgeyBIdHRwUmVxdWVzdEVycm9yIH0gZnJvbSAnLi4vZXJyb3JzL3JlcXVlc3QuanMnO1xuaW1wb3J0IHsgZGVjb2RlRXJyb3JSZXN1bHQgfSBmcm9tICcuL2FiaS9kZWNvZGVFcnJvclJlc3VsdC5qcyc7XG5pbXBvcnQgeyBlbmNvZGVBYmlQYXJhbWV0ZXJzIH0gZnJvbSAnLi9hYmkvZW5jb2RlQWJpUGFyYW1ldGVycy5qcyc7XG5pbXBvcnQgeyBpc0FkZHJlc3NFcXVhbCB9IGZyb20gJy4vYWRkcmVzcy9pc0FkZHJlc3NFcXVhbC5qcyc7XG5pbXBvcnQgeyBjb25jYXQgfSBmcm9tICcuL2RhdGEvY29uY2F0LmpzJztcbmltcG9ydCB7IGlzSGV4IH0gZnJvbSAnLi9kYXRhL2lzSGV4LmpzJztcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcbmV4cG9ydCBjb25zdCBvZmZjaGFpbkxvb2t1cFNpZ25hdHVyZSA9ICcweDU1NmYxODMwJztcbmV4cG9ydCBjb25zdCBvZmZjaGFpbkxvb2t1cEFiaUl0ZW0gPSB7XG4gICAgbmFtZTogJ09mZmNoYWluTG9va3VwJyxcbiAgICB0eXBlOiAnZXJyb3InLFxuICAgIGlucHV0czogW1xuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnc2VuZGVyJyxcbiAgICAgICAgICAgIHR5cGU6ICdhZGRyZXNzJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3VybHMnLFxuICAgICAgICAgICAgdHlwZTogJ3N0cmluZ1tdJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2NhbGxEYXRhJyxcbiAgICAgICAgICAgIHR5cGU6ICdieXRlcycsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdjYWxsYmFja0Z1bmN0aW9uJyxcbiAgICAgICAgICAgIHR5cGU6ICdieXRlczQnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnZXh0cmFEYXRhJyxcbiAgICAgICAgICAgIHR5cGU6ICdieXRlcycsXG4gICAgICAgIH0sXG4gICAgXSxcbn07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gb2ZmY2hhaW5Mb29rdXAoY2xpZW50LCB7IGJsb2NrTnVtYmVyLCBibG9ja1RhZywgZGF0YSwgdG8sIH0pIHtcbiAgICBjb25zdCB7IGFyZ3MgfSA9IGRlY29kZUVycm9yUmVzdWx0KHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgYWJpOiBbb2ZmY2hhaW5Mb29rdXBBYmlJdGVtXSxcbiAgICB9KTtcbiAgICBjb25zdCBbc2VuZGVyLCB1cmxzLCBjYWxsRGF0YSwgY2FsbGJhY2tTZWxlY3RvciwgZXh0cmFEYXRhXSA9IGFyZ3M7XG4gICAgY29uc3QgeyBjY2lwUmVhZCB9ID0gY2xpZW50O1xuICAgIGNvbnN0IGNjaXBSZXF1ZXN0XyA9IGNjaXBSZWFkICYmIHR5cGVvZiBjY2lwUmVhZD8ucmVxdWVzdCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IGNjaXBSZWFkLnJlcXVlc3RcbiAgICAgICAgOiBjY2lwUmVxdWVzdDtcbiAgICB0cnkge1xuICAgICAgICBpZiAoIWlzQWRkcmVzc0VxdWFsKHRvLCBzZW5kZXIpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IE9mZmNoYWluTG9va3VwU2VuZGVyTWlzbWF0Y2hFcnJvcih7IHNlbmRlciwgdG8gfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNjaXBSZXF1ZXN0Xyh7IGRhdGE6IGNhbGxEYXRhLCBzZW5kZXIsIHVybHMgfSk7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogZGF0YV8gfSA9IGF3YWl0IGNhbGwoY2xpZW50LCB7XG4gICAgICAgICAgICBibG9ja051bWJlcixcbiAgICAgICAgICAgIGJsb2NrVGFnLFxuICAgICAgICAgICAgZGF0YTogY29uY2F0KFtcbiAgICAgICAgICAgICAgICBjYWxsYmFja1NlbGVjdG9yLFxuICAgICAgICAgICAgICAgIGVuY29kZUFiaVBhcmFtZXRlcnMoW3sgdHlwZTogJ2J5dGVzJyB9LCB7IHR5cGU6ICdieXRlcycgfV0sIFtyZXN1bHQsIGV4dHJhRGF0YV0pLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICB0byxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkYXRhXztcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICB0aHJvdyBuZXcgT2ZmY2hhaW5Mb29rdXBFcnJvcih7XG4gICAgICAgICAgICBjYWxsYmFja1NlbGVjdG9yLFxuICAgICAgICAgICAgY2F1c2U6IGVycixcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBleHRyYURhdGEsXG4gICAgICAgICAgICBzZW5kZXIsXG4gICAgICAgICAgICB1cmxzLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2NpcFJlcXVlc3QoeyBkYXRhLCBzZW5kZXIsIHVybHMsIH0pIHtcbiAgICBsZXQgZXJyb3IgPSBuZXcgRXJyb3IoJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQuJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1cmxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHVybCA9IHVybHNbaV07XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IHVybC5pbmNsdWRlcygne2RhdGF9JykgPyAnR0VUJyA6ICdQT1NUJztcbiAgICAgICAgY29uc3QgYm9keSA9IG1ldGhvZCA9PT0gJ1BPU1QnID8geyBkYXRhLCBzZW5kZXIgfSA6IHVuZGVmaW5lZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLnJlcGxhY2UoJ3tzZW5kZXJ9Jywgc2VuZGVyKS5yZXBsYWNlKCd7ZGF0YX0nLCBkYXRhKSwge1xuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5oZWFkZXJzLmdldCgnQ29udGVudC1UeXBlJyk/LnN0YXJ0c1dpdGgoJ2FwcGxpY2F0aW9uL2pzb24nKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBlcnJvciA9IG5ldyBIdHRwUmVxdWVzdEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogcmVzdWx0Py5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzdHJpbmdpZnkocmVzdWx0LmVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiByZXNwb25zZS5zdGF0dXNUZXh0LFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc0hleChyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgT2ZmY2hhaW5Mb29rdXBSZXNwb25zZU1hbGZvcm1lZEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGVycm9yID0gbmV3IEh0dHBSZXF1ZXN0RXJyb3Ioe1xuICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICAgICAgZGV0YWlsczogZXJyLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgZXJyb3I7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jY2lwLmpzLm1hcCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBa0Q7QUFDWjtBQUNGO0FBQzdCLGtDQUFrQywrQ0FBUztBQUNsRCxrQkFBa0IseURBQXlEO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxpREFBTSxNQUFNO0FBQzVEO0FBQ0EsNkJBQTZCLE9BQU87QUFDcEMsMkJBQTJCLEtBQUs7QUFDaEMsd0NBQXdDLGlCQUFpQjtBQUN6RCxpQ0FBaUMsVUFBVTtBQUMzQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDTyxtREFBbUQsK0NBQVM7QUFDbkUsa0JBQWtCLGFBQWE7QUFDL0I7QUFDQTtBQUNBLGdDQUFnQyxpREFBTSxNQUFNO0FBQzVDLDZCQUE2Qiw4REFBUyxTQUFTO0FBQy9DO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNPLGdEQUFnRCwrQ0FBUztBQUNoRSxrQkFBa0IsWUFBWTtBQUM5QjtBQUNBO0FBQ0EscUNBQXFDLEdBQUc7QUFDeEMsa0RBQWtELE9BQU87QUFDekQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDOURpRDtBQUNpRjtBQUMxRTtBQUNPO0FBQ0k7QUFDTjtBQUNuQjtBQUNGO0FBQ0c7QUFDcEM7QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNPLHdDQUF3QyxrQ0FBa0M7QUFDakYsWUFBWSxPQUFPLEVBQUUsNEVBQWlCO0FBQ3RDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDBFQUFjO0FBQzNCLHNCQUFzQiw4RUFBaUMsR0FBRyxZQUFZO0FBQ3RFLDRDQUE0Qyw4QkFBOEI7QUFDMUUsZ0JBQWdCLGNBQWMsUUFBUSw2REFBSTtBQUMxQztBQUNBO0FBQ0Esa0JBQWtCLHVEQUFNO0FBQ3hCO0FBQ0EsZ0JBQWdCLGdGQUFtQixJQUFJLGVBQWUsSUFBSSxlQUFlO0FBQ3pFO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdFQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNPLDZCQUE2QixxQkFBcUI7QUFDekQ7QUFDQSxvQkFBb0IsaUJBQWlCO0FBQ3JDO0FBQ0Esc0NBQXNDLEtBQUs7QUFDM0MsMkNBQTJDLGVBQWU7QUFDMUQ7QUFDQSx1REFBdUQsT0FBTyxxQkFBcUIsS0FBSztBQUN4RjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQWdCO0FBQzVDO0FBQ0E7QUFDQSwwQkFBMEIsd0RBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQixxREFBSztBQUN0Qiw0QkFBNEIsaUZBQW9DO0FBQ2hFO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnRUFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EifQ==