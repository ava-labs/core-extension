(self["webpackChunkavalanche_extension"] = self["webpackChunkavalanche_extension"] || []).push([["vendors-node_modules_avalabs_core-wallets-sdk_esm_Avalanche_wallets_WalletAbstract_js"],{

/***/ "./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/getAllUTXOs.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/getAllUTXOs.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getPaginatedUTXOs": () => (/* binding */ r),
/* harmony export */   "getUTXOsForAddresses": () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @avalabs/avalanchejs */ "./node_modules/@avalabs/avalanchejs/dist/es/index.js");
const t=1024,n=1024;async function s(e,n,a){const o=e.slice(0,t),c=e.slice(t),i=await r(n,{...a,addresses:o});if(c.length){const t=await s(c,n,{...a,addresses:e});return i.merge(t)}return i}async function r(s,a){if(a.addresses.length>t)throw new Error(`Can not get UTXOs for more than ${t} addresses.`);const{endIndex:o,utxos:c}=await s.getUTXOs(a),i=new _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_0__.utils.UtxoSet(c);if(c.length>=n){const e=await r(s,{...a,startIndex:o});return i.merge(e)}return i}


/***/ }),

/***/ "./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/getStakeForAddresses.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/getStakeForAddresses.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getStakeForAddresses": () => (/* binding */ t)
/* harmony export */ });
async function t(s,e){const a=s.slice(0,256),u=s.slice(256),d=await e.getStake({addresses:a});if(u.length){const s=await t(u,e);return{staked:d.staked+s.staked,stakedOutputs:[...d.stakedOutputs,...s.stakedOutputs]}}return d}


/***/ }),

/***/ "./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/getUnixNow.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/getUnixNow.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getUnixNow": () => (/* binding */ t)
/* harmony export */ });
function t(){return BigInt(Math.floor(Date.now()/1e3))}


/***/ }),

/***/ "./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/orderBy.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/orderBy.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "orderBy": () => (/* binding */ r)
/* harmony export */ });
function r(r,t,n){return[...r].sort(((r,e)=>{for(let o=0;o<t.length;o++){const u=t[o];if(r[u]>e[u])return"asc"===n?1:-1;if(r[u]<e[u])return"asc"===n?-1:1}return 0}))}


/***/ }),

/***/ "./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/sortUTXOs.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/sortUTXOs.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "sortUTXOsByAmount": () => (/* binding */ m),
/* harmony export */   "sortUTXOsByAmountAscending": () => (/* binding */ r),
/* harmony export */   "sortUTXOsByAmountDescending": () => (/* binding */ n),
/* harmony export */   "sortUTXOsStaking": () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @avalabs/avalanchejs */ "./node_modules/@avalabs/avalanchejs/dist/es/index.js");
/* harmony import */ var _getUnixNow_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getUnixNow.js */ "./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/getUnixNow.js");
/* harmony import */ var _orderBy_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./orderBy.js */ "./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/orderBy.js");
function a(a){const m=(0,_getUnixNow_js__WEBPACK_IMPORTED_MODULE_0__.getUnixNow)(),n=a.map((o=>({utxo:o,..._avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_1__.utils.getUtxoInfo(o)}))),r=n.filter((t=>t.stakeableLocktime<=m)),s=n.filter((t=>t.stakeableLocktime>m)),c=(0,_orderBy_js__WEBPACK_IMPORTED_MODULE_2__.orderBy)(r,["amount"],"desc"),i=(0,_orderBy_js__WEBPACK_IMPORTED_MODULE_2__.orderBy)(s,["stakeableLocktime","amount"],"desc"),[u,...f]=c;return[...u?[u]:[],...i,...f].map((t=>t.utxo))}function m(o,a){const m=o.map((o=>({utxo:o,..._avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_1__.utils.getUtxoInfo(o)})));return (0,_orderBy_js__WEBPACK_IMPORTED_MODULE_2__.orderBy)(m,["amount"],a?"desc":"asc").map((t=>t.utxo))}const n=t=>m(t,!0),r=t=>m(t,!1);


/***/ }),

/***/ "./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/wallets/WalletAbstract.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/wallets/WalletAbstract.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WalletAbstract": () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @avalabs/avalanchejs */ "./node_modules/@avalabs/avalanchejs/dist/es/index.js");
/* harmony import */ var _avalabs_core_utils_sdk__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @avalabs/core-utils-sdk */ "./node_modules/@avalabs/core-utils-sdk/esm/strip0x.js");
/* harmony import */ var create_hash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! create-hash */ "./node_modules/create-hash/browser.js");
/* harmony import */ var create_hash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(create_hash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var bip32__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bip32 */ "./node_modules/bip32/src/index.js");
/* harmony import */ var _utils_getAllUTXOs_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/getAllUTXOs.js */ "./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/getAllUTXOs.js");
/* harmony import */ var _utils_getStakeForAddresses_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/getStakeForAddresses.js */ "./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/getStakeForAddresses.js");
/* harmony import */ var bip39__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bip39 */ "./node_modules/@avalabs/core-wallets-sdk/node_modules/bip39/src/index.js");
/* harmony import */ var xss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! xss */ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/index.js");
/* harmony import */ var xss__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(xss__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/sortUTXOs.js */ "./node_modules/@avalabs/core-wallets-sdk/esm/Avalanche/utils/sortUTXOs.js");
/* harmony import */ var bip32_path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! bip32-path */ "./node_modules/bip32-path/index.js");
/* harmony import */ var bip32_path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(bip32_path__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _utils_assertFeeStateProvided_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utils/assertFeeStateProvided.js */ "./node_modules/@avalabs/core-wallets-sdk/esm/utils/assertFeeStateProvided.js");
/* provided dependency */ var Buffer = __webpack_require__(/*! ./node_modules/node-polyfill-webpack-plugin/node_modules/buffer/index.js */ "./node_modules/node-polyfill-webpack-plugin/node_modules/buffer/index.js")["Buffer"];
const{parse:f,hexToBuffer:x}=_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.utils;class l{constructor(e){this.provider=e}setProvider(e){this.provider=e}getProvider(){return this.provider}async getUTXOs(e){const s=this.provider.getApi(e);return (0,_utils_getAllUTXOs_js__WEBPACK_IMPORTED_MODULE_6__.getUTXOsForAddresses)(this.getAddresses(e),s)}async getStake(){const e=this.provider.getApiP();return (0,_utils_getStakeForAddresses_js__WEBPACK_IMPORTED_MODULE_7__.getStakeForAddresses)(this.getAddresses("P"),e)}async getAtomicUTXOs(e,s){if(e===s)throw new Error("Chain can not be the same as source chain.");const t=this.provider.getApi(e),r=this.provider.getChainID(s);return (0,_utils_getAllUTXOs_js__WEBPACK_IMPORTED_MODULE_6__.getUTXOsForAddresses)(this.getAddresses(e),t,{sourceChain:r,addresses:[]})}async getNonce(){const e=this.getAddressEVM();return await this.provider.evmRpc.getTransactionCount(e)}exportX(t,r,d,n){n=n||this.getCurrentAddress(d);const o=f(n)[2],i=this.provider.getAvaxID(),a=_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.TransferableOutput.fromNative(i,t,[o]),m=(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(r.getUTXOs(),!0),h=this.provider.getChainID(d),g=this.getAddresses("X").map((e=>f(e)[2])),A=f(this.getChangeAddress("X"))[2];return _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.avm.newExportTx(this.provider.getContext(),h,g,m,[a],{threshold:1,changeAddresses:[A]})}importP({utxoSet:e,sourceChain:s,toAddress:r,threshold:d,feeState:n,locktime:o}){const i=this.provider.getChainID(s),a=this.getAddresses("P").map((e=>f(e)[2]));f(this.getChangeAddress("P"))[2],r=r||this.getCurrentAddress("P");const m=f(r)[2],h=e.getUTXOs();return (0,_utils_assertFeeStateProvided_js__WEBPACK_IMPORTED_MODULE_9__.assertFeeStateProvided)(n),_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newImportTx({fromAddressesBytes:a,utxos:h,toAddressesBytes:[m],sourceChainId:i,threshold:d,feeState:n,locktime:o},this.provider.getContext())}importX(e,t,r){const d=this.provider.getChainID(t),n=this.getAddresses("X").map((e=>f(e)[2])),o=f(this.getChangeAddress("X"))[2];r=r||this.getCurrentAddress("X");const i=f(r)[2];return _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.avm.newImportTx(this.provider.getContext(),d,e.getUTXOs(),[i],n,{changeAddresses:[o]})}importC(e,s,t,d,n){const o=this.provider.getChainID(s),i=this.getAddresses("C").map((e=>f(e)[2]));n=n||this.getAddressEVM();const a=Buffer.from((0,_avalabs_core_utils_sdk__WEBPACK_IMPORTED_MODULE_10__.strip0x)(n),"hex");return _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.evm.newImportTxFromBaseFee(this.provider.getContext(),a,i,e.getUTXOs(),o,t,d)}exportC(e,s,t,d,n){const o=x(this.getAddressEVM()),i=this.provider.getChainID(s);n=n||this.getCurrentAddress(s);const a=f(n)[2],m=d/BigInt(1e9);return _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.evm.newExportTxFromBaseFee(this.provider.getContext(),m,e,i,o,[a],t)}exportP({amount:s,utxoSet:r,destination:d,feeState:n,toAddress:o}){o=o||this.getCurrentAddress(d);const i=f(o)[2],a=this.provider.getAvaxID(),m=_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.TransferableOutput.fromNative(a,s,[i]),h=(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(r.getUTXOs(),!0),g=this.provider.getChainID(d),A=this.getAddresses("P").map((e=>f(e)[2])),c=f(this.getChangeAddress("P"))[2];return (0,_utils_assertFeeStateProvided_js__WEBPACK_IMPORTED_MODULE_9__.assertFeeStateProvided)(n),_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newExportTx({changeAddressesBytes:[c],fromAddressesBytes:A,utxos:h,outputs:[m],destinationChainId:g,feeState:n},this.provider.getContext())}consolidateP({utxoSet:s,amount:r,feeState:d,toAddress:n,options:o}){const i=(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmountAscending)(s.getUTXOs());n=n??this.getCurrentAddress("P");const a=f(n)[2],m=this.provider.getContext(),h=[_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.TransferableOutput.fromNative(m.avaxAssetID,r,[a])],g=this.getAddresses("P").map((e=>f(e)[2])),u=f(this.getChangeAddress("P"))[2],c=o?.changeAddresses??[u];return (0,_utils_assertFeeStateProvided_js__WEBPACK_IMPORTED_MODULE_9__.assertFeeStateProvided)(d),_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newBaseTx({changeAddressesBytes:c,fromAddressesBytes:g,utxos:i,outputs:h,minIssuanceTime:o?.minIssuanceTime,memo:o?.memo,feeState:d},m)}baseTX({utxoSet:r,chain:d,toAddress:n,amountsPerAsset:o,feeState:i,options:a,fromAddresses:m}){const[h,g,A]=f(n);if(h!==d||g!==this.provider.getHrp())throw new Error(`Invalid recipient address "${n}"`);const c=Object.entries(o).map((([s,t])=>_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.TransferableOutput.fromNative(s,t,[A]))),x=(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(r.getUTXOs(),!0),l=(m??this.getAddresses(d)).map((e=>f(e)[2])),I=f(this.getChangeAddress("P"))[2],T=a?.changeAddresses??[I];return"X"===d?_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.avm.newBaseTx(this.provider.getContext(),l,x,c,a):((0,_utils_assertFeeStateProvided_js__WEBPACK_IMPORTED_MODULE_9__.assertFeeStateProvided)(i),_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newBaseTx({changeAddressesBytes:T,fromAddressesBytes:l,utxos:x,outputs:c,minIssuanceTime:a?.minIssuanceTime,memo:a?.memo,feeState:i},this.provider.getContext()))}convertSubnetToL1({utxoSet:e,chainId:s,subnetId:r,subnetAuth:a,feeState:m,address:h,validators:g,options:A,fromAddresses:c}){const p=(c??this.getAddresses("P")).map((e=>f(e)[2])),x=f(this.getChangeAddress("P"))[2],l=A?.changeAddresses??[x],I=g.map((({nodeId:e,pubKey:s,signature:t,balance:r,weight:a,deactivationOwner:m,remainingBalanceOwner:h})=>{const g=new _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvmSerial.ProofOfPossession(Uint8Array.from(_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.utils.hexToBuffer(s)),Uint8Array.from(_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.utils.hexToBuffer(t))),u=_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.PChainOwner.fromNative(h.addresses.map((e=>f(e)[2])),h.threshold??1),A=_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.PChainOwner.fromNative(m.addresses.map((e=>f(e)[2])),m.threshold??1);return _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.L1Validator.fromNative(e,a,r,g,u,A)}));return _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newConvertSubnetToL1Tx({changeAddressesBytes:l,validators:I,fromAddressesBytes:p,address:f(h)[2],chainId:s,subnetId:r,subnetAuth:a,feeState:m,utxos:(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(e.getUTXOs(),!0)},this.provider.getContext())}registerL1Validator({utxoSet:e,balance:s,signature:r,message:d,feeState:o,fromAddresses:i,options:a}){const m=(i??this.getAddresses("P")).map((e=>f(e)[2])),h=f(this.getChangeAddress("P"))[2],g=a?.changeAddresses??[h];return _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newRegisterL1ValidatorTx({utxos:(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(e.getUTXOs(),!0),balance:s,blsSignature:Uint8Array.from(_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.utils.hexToBuffer(r)),changeAddressesBytes:g,feeState:o,fromAddressesBytes:m,memo:a?.memo,message:Uint8Array.from(_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.utils.hexToBuffer(d)),minIssuanceTime:a?.minIssuanceTime},this.provider.getContext())}setL1ValidatorWeight({utxoSet:e,feeState:s,message:r,options:d,fromAddresses:o}){const i=(o??this.getAddresses("P")).map((e=>f(e)[2])),a=f(this.getChangeAddress("P"))[2],m=d?.changeAddresses??[a];return _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newSetL1ValidatorWeightTx({utxos:(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(e.getUTXOs(),!0),changeAddressesBytes:m,feeState:s,fromAddressesBytes:i,memo:d?.memo,message:Uint8Array.from(_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.utils.hexToBuffer(r)),minIssuanceTime:d?.minIssuanceTime},this.provider.getContext())}disableL1Validator({utxoSet:e,feeState:s,options:r,fromAddresses:d,disableAuth:n,validationId:o}){const i=(d??this.getAddresses("P")).map((e=>f(e)[2])),a=f(this.getChangeAddress("P"))[2],m=r?.changeAddresses??[a];return _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newDisableL1ValidatorTx({disableAuth:n,validationId:o,utxos:(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(e.getUTXOs(),!0),changeAddressesBytes:m,feeState:s,fromAddressesBytes:i,memo:r?.memo,minIssuanceTime:r?.minIssuanceTime},this.provider.getContext())}increaseL1ValidatorBalance({utxoSet:e,feeState:s,options:r,fromAddresses:d,balance:n,validationId:o}){const i=(d??this.getAddresses("P")).map((e=>f(e)[2])),a=f(this.getChangeAddress("P"))[2],m=r?.changeAddresses??[a];return _avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newIncreaseL1ValidatorBalanceTx({balance:n,validationId:o,utxos:(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(e.getUTXOs(),!0),changeAddressesBytes:m,feeState:s,fromAddressesBytes:i,memo:r?.memo,minIssuanceTime:r?.minIssuanceTime},this.provider.getContext())}createBlockchain({utxoSet:e,subnetId:s,chainName:r,vmID:d,fxIds:n,genesisData:o,subnetAuth:i,feeState:a,options:m,fromAddresses:h}){const g=(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(e.getUTXOs(),!0),A=(h??this.getAddresses("P")).map((e=>f(e)[2])),c=f(this.getChangeAddress("P"))[2],x=m?.changeAddresses??[c];return (0,_utils_assertFeeStateProvided_js__WEBPACK_IMPORTED_MODULE_9__.assertFeeStateProvided)(a),_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newCreateChainTx({chainName:r,feeState:a,fromAddressesBytes:A,fxIds:n,genesisData:o,subnetAuth:i,subnetId:s,utxos:g,vmId:d,changeAddressesBytes:x},this.provider.getContext())}createSubnet({utxoSet:e,rewardAddresses:s,feeState:r,fromAddresses:d,options:n,threshold:o,locktime:i}){const a=(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(e.getUTXOs(),!0),m=(d??this.getAddresses("P")).map((e=>f(e)[2])),h=f(this.getChangeAddress("P"))[2],g=n?.changeAddresses??[h],A=s.map((e=>f(e)[2]));return (0,_utils_assertFeeStateProvided_js__WEBPACK_IMPORTED_MODULE_9__.assertFeeStateProvided)(r),_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newCreateSubnetTx({fromAddressesBytes:m,changeAddressesBytes:g,utxos:a,minIssuanceTime:n?.minIssuanceTime,memo:n?.memo,feeState:r,threshold:o,locktime:i,subnetOwners:A},this.provider.getContext())}addSubnetValidator({utxoSet:e,nodeId:s,start:r,end:d,weight:n,subnetId:o,subnetAuth:i,feeState:a,fromAddresses:m,options:h}){const g=(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(e.getUTXOs(),!0),A=(m??this.getAddresses("P")).map((e=>f(e)[2])),c=f(this.getChangeAddress("P"))[2],x=h?.changeAddresses??[c];return (0,_utils_assertFeeStateProvided_js__WEBPACK_IMPORTED_MODULE_9__.assertFeeStateProvided)(a),_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newAddSubnetValidatorTx({changeAddressesBytes:x,fromAddressesBytes:A,utxos:g,minIssuanceTime:h?.minIssuanceTime,memo:h?.memo,nodeId:s,start:r,end:d,weight:n,subnetId:o,subnetAuth:i,feeState:a},this.provider.getContext())}addPermissionlessValidator({utxoSet:e,nodeId:s,start:r,end:d,weight:n,subnetId:o,shares:i,feeState:m,fromAddresses:h,rewardAddresses:g,delegatorRewardAddresses:u,publicKey:A,signature:x,options:l,threshold:I,locktime:T,stakingAssetId:v}){const C=(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsStaking)(e.getUTXOs()),S=(h??this.getAddresses("P")).map((e=>f(e)[2])),b=(g??[this.getCurrentAddress("P")]).map((e=>f(e)[2])),w=(u??[this.getCurrentAddress("P")]).map((e=>f(e)[2]));if(!(o!==_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.networkIDs.PrimaryNetworkID.toString()||A&&x))throw new Error("Must provide public key and signature for primary subnet.");const P=f(this.getChangeAddress("P"))[2],B=l?.changeAddresses??[P];return (0,_utils_assertFeeStateProvided_js__WEBPACK_IMPORTED_MODULE_9__.assertFeeStateProvided)(m),_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newAddPermissionlessValidatorTx({fromAddressesBytes:S,delegatorRewardsOwner:w,utxos:C,minIssuanceTime:l?.minIssuanceTime,memo:l?.memo,changeAddressesBytes:B,nodeId:s,start:r,end:d,weight:n,subnetId:o,shares:i,feeState:m,publicKey:A,rewardAddresses:b,signature:x,locktime:T,threshold:I,stakingAssetId:v},this.provider.getContext())}addPermissionlessDelegator({utxoSet:e,nodeId:s,start:r,end:d,weight:n,subnetId:o,fromAddresses:i,rewardAddresses:a,options:m,locktime:h,feeState:g,threshold:u,stakingAssetId:A}){const x=(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsStaking)(e.getUTXOs()),l=(i??this.getAddresses("P")).map((e=>f(e)[2])),I=(a??[this.getCurrentAddress("P")]).map((e=>f(e)[2])),T=f(this.getChangeAddress("P"))[2],v=m?.changeAddresses??[T];return (0,_utils_assertFeeStateProvided_js__WEBPACK_IMPORTED_MODULE_9__.assertFeeStateProvided)(g),_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newAddPermissionlessDelegatorTx({fromAddressesBytes:l,utxos:x,minIssuanceTime:m?.minIssuanceTime,memo:m?.memo,changeAddressesBytes:v,nodeId:s,start:r,end:d,weight:n,subnetId:o,rewardAddresses:I,locktime:h,stakingAssetId:A,threshold:u,feeState:g},this.provider.getContext())}removeSubnetValidator({utxoSet:e,nodeId:s,subnetId:r,subnetAuth:d,fromAddresses:n,feeState:o,options:i}){const a=(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(e.getUTXOs(),!0),m=(n??this.getAddresses("P")).map((e=>f(e)[2])),h=f(this.getChangeAddress("P"))[2],g=i?.changeAddresses??[h];return (0,_utils_assertFeeStateProvided_js__WEBPACK_IMPORTED_MODULE_9__.assertFeeStateProvided)(o),_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newRemoveSubnetValidatorTx({changeAddressesBytes:g,fromAddressesBytes:m,utxos:a,minIssuanceTime:i?.minIssuanceTime,memo:i?.memo,nodeId:s,subnetId:r,subnetAuth:d,feeState:o},this.provider.getContext())}transferSubnetOwnershipTx({utxoSet:e,subnetId:s,subnetAuth:r,subnetOwners:d,feeState:n,fromAddresses:o,options:i,threshold:a,locktime:m}){const h=(0,_utils_sortUTXOs_js__WEBPACK_IMPORTED_MODULE_8__.sortUTXOsByAmount)(e.getUTXOs(),!0),g=(o??this.getAddresses("P")).map((e=>f(e)[2])),A=f(this.getChangeAddress("P"))[2],c=i?.changeAddresses??[A],x=d.map((e=>f(e)[2]));return (0,_utils_assertFeeStateProvided_js__WEBPACK_IMPORTED_MODULE_9__.assertFeeStateProvided)(n),_avalabs_avalanchejs__WEBPACK_IMPORTED_MODULE_5__.pvm.newTransferSubnetOwnershipTx({changeAddressesBytes:c,fromAddressesBytes:g,utxos:h,minIssuanceTime:i?.minIssuanceTime,memo:i?.memo,subnetId:s,subnetAuth:r,subnetOwners:x,feeState:n,threshold:a,locktime:m},this.provider.getContext())}}


/***/ }),

/***/ "./node_modules/@avalabs/core-wallets-sdk/esm/utils/assertFeeStateProvided.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@avalabs/core-wallets-sdk/esm/utils/assertFeeStateProvided.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "assertFeeStateProvided": () => (/* binding */ e)
/* harmony export */ });
function e(e){if("object"!=typeof e||!e)throw new Error("feeState parameter is required post E-upgrade")}


/***/ }),

/***/ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/default.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/default.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

/**
 * default settings
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var FilterCSS = (__webpack_require__(/*! cssfilter */ "./node_modules/cssfilter/lib/index.js").FilterCSS);
var getDefaultCSSWhiteList = (__webpack_require__(/*! cssfilter */ "./node_modules/cssfilter/lib/index.js").getDefaultWhiteList);
var _ = __webpack_require__(/*! ./util */ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/util.js");

function getDefaultWhiteList() {
  return {
    a: ["target", "href", "title"],
    abbr: ["title"],
    address: [],
    area: ["shape", "coords", "href", "alt"],
    article: [],
    aside: [],
    audio: [
      "autoplay",
      "controls",
      "crossorigin",
      "loop",
      "muted",
      "preload",
      "src",
    ],
    b: [],
    bdi: ["dir"],
    bdo: ["dir"],
    big: [],
    blockquote: ["cite"],
    br: [],
    caption: [],
    center: [],
    cite: [],
    code: [],
    col: ["align", "valign", "span", "width"],
    colgroup: ["align", "valign", "span", "width"],
    dd: [],
    del: ["datetime"],
    details: ["open"],
    div: [],
    dl: [],
    dt: [],
    em: [],
    figcaption: [],
    figure: [],
    font: ["color", "size", "face"],
    footer: [],
    h1: [],
    h2: [],
    h3: [],
    h4: [],
    h5: [],
    h6: [],
    header: [],
    hr: [],
    i: [],
    img: ["src", "alt", "title", "width", "height"],
    ins: ["datetime"],
    li: [],
    mark: [],
    nav: [],
    ol: [],
    p: [],
    pre: [],
    s: [],
    section: [],
    small: [],
    span: [],
    sub: [],
    summary: [],
    sup: [],
    strong: [],
    strike: [],
    table: ["width", "border", "align", "valign"],
    tbody: ["align", "valign"],
    td: ["width", "rowspan", "colspan", "align", "valign"],
    tfoot: ["align", "valign"],
    th: ["width", "rowspan", "colspan", "align", "valign"],
    thead: ["align", "valign"],
    tr: ["rowspan", "align", "valign"],
    tt: [],
    u: [],
    ul: [],
    video: [
      "autoplay",
      "controls",
      "crossorigin",
      "loop",
      "muted",
      "playsinline",
      "poster",
      "preload",
      "src",
      "height",
      "width",
    ],
  };
}

var defaultCSSFilter = new FilterCSS();

/**
 * default onTag function
 *
 * @param {String} tag
 * @param {String} html
 * @param {Object} options
 * @return {String}
 */
function onTag(tag, html, options) {
  // do nothing
}

/**
 * default onIgnoreTag function
 *
 * @param {String} tag
 * @param {String} html
 * @param {Object} options
 * @return {String}
 */
function onIgnoreTag(tag, html, options) {
  // do nothing
}

/**
 * default onTagAttr function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function onTagAttr(tag, name, value) {
  // do nothing
}

/**
 * default onIgnoreTagAttr function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function onIgnoreTagAttr(tag, name, value) {
  // do nothing
}

/**
 * default escapeHtml function
 *
 * @param {String} html
 */
function escapeHtml(html) {
  return html.replace(REGEXP_LT, "&lt;").replace(REGEXP_GT, "&gt;");
}

/**
 * default safeAttrValue function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @param {Object} cssFilter
 * @return {String}
 */
function safeAttrValue(tag, name, value, cssFilter) {
  // unescape attribute value firstly
  value = friendlyAttrValue(value);

  if (name === "href" || name === "src") {
    // filter `href` and `src` attribute
    // only allow the value that starts with `http://` | `https://` | `mailto:` | `/` | `#`
    value = _.trim(value);
    if (value === "#") return "#";
    if (
      !(
        value.substr(0, 7) === "http://" ||
        value.substr(0, 8) === "https://" ||
        value.substr(0, 7) === "mailto:" ||
        value.substr(0, 4) === "tel:" ||
        value.substr(0, 11) === "data:image/" ||
        value.substr(0, 6) === "ftp://" ||
        value.substr(0, 2) === "./" ||
        value.substr(0, 3) === "../" ||
        value[0] === "#" ||
        value[0] === "/"
      )
    ) {
      return "";
    }
  } else if (name === "background") {
    // filter `background` attribute (maybe no use)
    // `javascript:`
    REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
      return "";
    }
  } else if (name === "style") {
    // `expression()`
    REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)) {
      return "";
    }
    // `url()`
    REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)) {
      REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
      if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
        return "";
      }
    }
    if (cssFilter !== false) {
      cssFilter = cssFilter || defaultCSSFilter;
      value = cssFilter.process(value);
    }
  }

  // escape `<>"` before returns
  value = escapeAttrValue(value);
  return value;
}

// RegExp list
var REGEXP_LT = /</g;
var REGEXP_GT = />/g;
var REGEXP_QUOTE = /"/g;
var REGEXP_QUOTE_2 = /&quot;/g;
var REGEXP_ATTR_VALUE_1 = /&#([a-zA-Z0-9]*);?/gim;
var REGEXP_ATTR_VALUE_COLON = /&colon;?/gim;
var REGEXP_ATTR_VALUE_NEWLINE = /&newline;?/gim;
// var REGEXP_DEFAULT_ON_TAG_ATTR_3 = /\/\*|\*\//gm;
var REGEXP_DEFAULT_ON_TAG_ATTR_4 =
  /((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi;
// var REGEXP_DEFAULT_ON_TAG_ATTR_5 = /^[\s"'`]*(d\s*a\s*t\s*a\s*)\:/gi;
// var REGEXP_DEFAULT_ON_TAG_ATTR_6 = /^[\s"'`]*(d\s*a\s*t\s*a\s*)\:\s*image\//gi;
var REGEXP_DEFAULT_ON_TAG_ATTR_7 =
  /e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi;
var REGEXP_DEFAULT_ON_TAG_ATTR_8 = /u\s*r\s*l\s*\(.*/gi;

/**
 * escape double quote
 *
 * @param {String} str
 * @return {String} str
 */
function escapeQuote(str) {
  return str.replace(REGEXP_QUOTE, "&quot;");
}

/**
 * unescape double quote
 *
 * @param {String} str
 * @return {String} str
 */
function unescapeQuote(str) {
  return str.replace(REGEXP_QUOTE_2, '"');
}

/**
 * escape html entities
 *
 * @param {String} str
 * @return {String}
 */
function escapeHtmlEntities(str) {
  return str.replace(REGEXP_ATTR_VALUE_1, function replaceUnicode(str, code) {
    return code[0] === "x" || code[0] === "X"
      ? String.fromCharCode(parseInt(code.substr(1), 16))
      : String.fromCharCode(parseInt(code, 10));
  });
}

/**
 * escape html5 new danger entities
 *
 * @param {String} str
 * @return {String}
 */
function escapeDangerHtml5Entities(str) {
  return str
    .replace(REGEXP_ATTR_VALUE_COLON, ":")
    .replace(REGEXP_ATTR_VALUE_NEWLINE, " ");
}

/**
 * clear nonprintable characters
 *
 * @param {String} str
 * @return {String}
 */
function clearNonPrintableCharacter(str) {
  var str2 = "";
  for (var i = 0, len = str.length; i < len; i++) {
    str2 += str.charCodeAt(i) < 32 ? " " : str.charAt(i);
  }
  return _.trim(str2);
}

/**
 * get friendly attribute value
 *
 * @param {String} str
 * @return {String}
 */
function friendlyAttrValue(str) {
  str = unescapeQuote(str);
  str = escapeHtmlEntities(str);
  str = escapeDangerHtml5Entities(str);
  str = clearNonPrintableCharacter(str);
  return str;
}

/**
 * unescape attribute value
 *
 * @param {String} str
 * @return {String}
 */
function escapeAttrValue(str) {
  str = escapeQuote(str);
  str = escapeHtml(str);
  return str;
}

/**
 * `onIgnoreTag` function for removing all the tags that are not in whitelist
 */
function onIgnoreTagStripAll() {
  return "";
}

/**
 * remove tag body
 * specify a `tags` list, if the tag is not in the `tags` list then process by the specify function (optional)
 *
 * @param {array} tags
 * @param {function} next
 */
function StripTagBody(tags, next) {
  if (typeof next !== "function") {
    next = function () {};
  }

  var isRemoveAllTag = !Array.isArray(tags);
  function isRemoveTag(tag) {
    if (isRemoveAllTag) return true;
    return _.indexOf(tags, tag) !== -1;
  }

  var removeList = [];
  var posStart = false;

  return {
    onIgnoreTag: function (tag, html, options) {
      if (isRemoveTag(tag)) {
        if (options.isClosing) {
          var ret = "[/removed]";
          var end = options.position + ret.length;
          removeList.push([
            posStart !== false ? posStart : options.position,
            end,
          ]);
          posStart = false;
          return ret;
        } else {
          if (!posStart) {
            posStart = options.position;
          }
          return "[removed]";
        }
      } else {
        return next(tag, html, options);
      }
    },
    remove: function (html) {
      var rethtml = "";
      var lastPos = 0;
      _.forEach(removeList, function (pos) {
        rethtml += html.slice(lastPos, pos[0]);
        lastPos = pos[1];
      });
      rethtml += html.slice(lastPos);
      return rethtml;
    },
  };
}

/**
 * remove html comments
 *
 * @param {String} html
 * @return {String}
 */
function stripCommentTag(html) {
  var retHtml = "";
  var lastPos = 0;
  while (lastPos < html.length) {
    var i = html.indexOf("<!--", lastPos);
    if (i === -1) {
      retHtml += html.slice(lastPos);
      break;
    }
    retHtml += html.slice(lastPos, i);
    var j = html.indexOf("-->", i);
    if (j === -1) {
      break;
    }
    lastPos = j + 3;
  }
  return retHtml;
}

/**
 * remove invisible characters
 *
 * @param {String} html
 * @return {String}
 */
function stripBlankChar(html) {
  var chars = html.split("");
  chars = chars.filter(function (char) {
    var c = char.charCodeAt(0);
    if (c === 127) return false;
    if (c <= 31) {
      if (c === 10 || c === 13) return true;
      return false;
    }
    return true;
  });
  return chars.join("");
}

exports.whiteList = getDefaultWhiteList();
exports.getDefaultWhiteList = getDefaultWhiteList;
exports.onTag = onTag;
exports.onIgnoreTag = onIgnoreTag;
exports.onTagAttr = onTagAttr;
exports.onIgnoreTagAttr = onIgnoreTagAttr;
exports.safeAttrValue = safeAttrValue;
exports.escapeHtml = escapeHtml;
exports.escapeQuote = escapeQuote;
exports.unescapeQuote = unescapeQuote;
exports.escapeHtmlEntities = escapeHtmlEntities;
exports.escapeDangerHtml5Entities = escapeDangerHtml5Entities;
exports.clearNonPrintableCharacter = clearNonPrintableCharacter;
exports.friendlyAttrValue = friendlyAttrValue;
exports.escapeAttrValue = escapeAttrValue;
exports.onIgnoreTagStripAll = onIgnoreTagStripAll;
exports.StripTagBody = StripTagBody;
exports.stripCommentTag = stripCommentTag;
exports.stripBlankChar = stripBlankChar;
exports.cssFilter = defaultCSSFilter;
exports.getDefaultCSSWhiteList = getDefaultCSSWhiteList;


/***/ }),

/***/ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/index.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/index.js ***!
  \******************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

/**
 * xss
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var DEFAULT = __webpack_require__(/*! ./default */ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/default.js");
var parser = __webpack_require__(/*! ./parser */ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/parser.js");
var FilterXSS = __webpack_require__(/*! ./xss */ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/xss.js");

/**
 * filter xss function
 *
 * @param {String} html
 * @param {Object} options { whiteList, onTag, onTagAttr, onIgnoreTag, onIgnoreTagAttr, safeAttrValue, escapeHtml }
 * @return {String}
 */
function filterXSS(html, options) {
  var xss = new FilterXSS(options);
  return xss.process(html);
}

exports = module.exports = filterXSS;
exports.filterXSS = filterXSS;
exports.FilterXSS = FilterXSS;

(function () {
  for (var i in DEFAULT) {
    exports[i] = DEFAULT[i];
  }
  for (var j in parser) {
    exports[j] = parser[j];
  }
})();

// using `xss` on the browser, output `filterXSS` to the globals
if (typeof window !== "undefined") {
  window.filterXSS = module.exports;
}

// using `xss` on the WebWorker, output `filterXSS` to the globals
function isWorkerEnv() {
  return (
    typeof self !== "undefined" &&
    typeof DedicatedWorkerGlobalScope !== "undefined" &&
    self instanceof DedicatedWorkerGlobalScope
  );
}
if (isWorkerEnv()) {
  self.filterXSS = module.exports;
}


/***/ }),

/***/ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/parser.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/parser.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

/**
 * Simple HTML Parser
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var _ = __webpack_require__(/*! ./util */ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/util.js");

/**
 * get tag name
 *
 * @param {String} html e.g. '<a hef="#">'
 * @return {String}
 */
function getTagName(html) {
  var i = _.spaceIndex(html);
  var tagName;
  if (i === -1) {
    tagName = html.slice(1, -1);
  } else {
    tagName = html.slice(1, i + 1);
  }
  tagName = _.trim(tagName).toLowerCase();
  if (tagName.slice(0, 1) === "/") tagName = tagName.slice(1);
  if (tagName.slice(-1) === "/") tagName = tagName.slice(0, -1);
  return tagName;
}

/**
 * is close tag?
 *
 * @param {String} html 如：'<a hef="#">'
 * @return {Boolean}
 */
function isClosing(html) {
  return html.slice(0, 2) === "</";
}

/**
 * parse input html and returns processed html
 *
 * @param {String} html
 * @param {Function} onTag e.g. function (sourcePosition, position, tag, html, isClosing)
 * @param {Function} escapeHtml
 * @return {String}
 */
function parseTag(html, onTag, escapeHtml) {
  "use strict";

  var rethtml = "";
  var lastPos = 0;
  var tagStart = false;
  var quoteStart = false;
  var currentPos = 0;
  var len = html.length;
  var currentTagName = "";
  var currentHtml = "";

  chariterator: for (currentPos = 0; currentPos < len; currentPos++) {
    var c = html.charAt(currentPos);
    if (tagStart === false) {
      if (c === "<") {
        tagStart = currentPos;
        continue;
      }
    } else {
      if (quoteStart === false) {
        if (c === "<") {
          rethtml += escapeHtml(html.slice(lastPos, currentPos));
          tagStart = currentPos;
          lastPos = currentPos;
          continue;
        }
        if (c === ">" || currentPos === len - 1) {
          rethtml += escapeHtml(html.slice(lastPos, tagStart));
          currentHtml = html.slice(tagStart, currentPos + 1);
          currentTagName = getTagName(currentHtml);
          rethtml += onTag(
            tagStart,
            rethtml.length,
            currentTagName,
            currentHtml,
            isClosing(currentHtml)
          );
          lastPos = currentPos + 1;
          tagStart = false;
          continue;
        }
        if (c === '"' || c === "'") {
          var i = 1;
          var ic = html.charAt(currentPos - i);

          while (ic.trim() === "" || ic === "=") {
            if (ic === "=") {
              quoteStart = c;
              continue chariterator;
            }
            ic = html.charAt(currentPos - ++i);
          }
        }
      } else {
        if (c === quoteStart) {
          quoteStart = false;
          continue;
        }
      }
    }
  }
  if (lastPos < len) {
    rethtml += escapeHtml(html.substr(lastPos));
  }

  return rethtml;
}

var REGEXP_ILLEGAL_ATTR_NAME = /[^a-zA-Z0-9\\_:.-]/gim;

/**
 * parse input attributes and returns processed attributes
 *
 * @param {String} html e.g. `href="#" target="_blank"`
 * @param {Function} onAttr e.g. `function (name, value)`
 * @return {String}
 */
function parseAttr(html, onAttr) {
  "use strict";

  var lastPos = 0;
  var lastMarkPos = 0;
  var retAttrs = [];
  var tmpName = false;
  var len = html.length;

  function addAttr(name, value) {
    name = _.trim(name);
    name = name.replace(REGEXP_ILLEGAL_ATTR_NAME, "").toLowerCase();
    if (name.length < 1) return;
    var ret = onAttr(name, value || "");
    if (ret) retAttrs.push(ret);
  }

  // 逐个分析字符
  for (var i = 0; i < len; i++) {
    var c = html.charAt(i);
    var v, j;
    if (tmpName === false && c === "=") {
      tmpName = html.slice(lastPos, i);
      lastPos = i + 1;
      lastMarkPos = html.charAt(lastPos) === '"' || html.charAt(lastPos) === "'" ? lastPos : findNextQuotationMark(html, i + 1);
      continue;
    }
    if (tmpName !== false) {
      if (
        i === lastMarkPos
      ) {
        j = html.indexOf(c, i + 1);
        if (j === -1) {
          break;
        } else {
          v = _.trim(html.slice(lastMarkPos + 1, j));
          addAttr(tmpName, v);
          tmpName = false;
          i = j;
          lastPos = i + 1;
          continue;
        }
      }
    }
    if (/\s|\n|\t/.test(c)) {
      html = html.replace(/\s|\n|\t/g, " ");
      if (tmpName === false) {
        j = findNextEqual(html, i);
        if (j === -1) {
          v = _.trim(html.slice(lastPos, i));
          addAttr(v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          i = j - 1;
          continue;
        }
      } else {
        j = findBeforeEqual(html, i - 1);
        if (j === -1) {
          v = _.trim(html.slice(lastPos, i));
          v = stripQuoteWrap(v);
          addAttr(tmpName, v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          continue;
        }
      }
    }
  }

  if (lastPos < html.length) {
    if (tmpName === false) {
      addAttr(html.slice(lastPos));
    } else {
      addAttr(tmpName, stripQuoteWrap(_.trim(html.slice(lastPos))));
    }
  }

  return _.trim(retAttrs.join(" "));
}

function findNextEqual(str, i) {
  for (; i < str.length; i++) {
    var c = str[i];
    if (c === " ") continue;
    if (c === "=") return i;
    return -1;
  }
}

function findNextQuotationMark(str, i) {
  for (; i < str.length; i++) {
    var c = str[i];
    if (c === " ") continue;
    if (c === "'" || c === '"') return i;
    return -1;
  }
}

function findBeforeEqual(str, i) {
  for (; i > 0; i--) {
    var c = str[i];
    if (c === " ") continue;
    if (c === "=") return i;
    return -1;
  }
}

function isQuoteWrapString(text) {
  if (
    (text[0] === '"' && text[text.length - 1] === '"') ||
    (text[0] === "'" && text[text.length - 1] === "'")
  ) {
    return true;
  } else {
    return false;
  }
}

function stripQuoteWrap(text) {
  if (isQuoteWrapString(text)) {
    return text.substr(1, text.length - 2);
  } else {
    return text;
  }
}

exports.parseTag = parseTag;
exports.parseAttr = parseAttr;


/***/ }),

/***/ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/util.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/util.js ***!
  \*****************************************************************************/
/***/ ((module) => {

module.exports = {
  indexOf: function (arr, item) {
    var i, j;
    if (Array.prototype.indexOf) {
      return arr.indexOf(item);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      if (arr[i] === item) {
        return i;
      }
    }
    return -1;
  },
  forEach: function (arr, fn, scope) {
    var i, j;
    if (Array.prototype.forEach) {
      return arr.forEach(fn, scope);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      fn.call(scope, arr[i], i, arr);
    }
  },
  trim: function (str) {
    if (String.prototype.trim) {
      return str.trim();
    }
    return str.replace(/(^\s*)|(\s*$)/g, "");
  },
  spaceIndex: function (str) {
    var reg = /\s|\n|\t/;
    var match = reg.exec(str);
    return match ? match.index : -1;
  },
};


/***/ }),

/***/ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/xss.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/xss.js ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var console = __webpack_require__(/*! ./node_modules/console-browserify/index.js */ "./node_modules/console-browserify/index.js");
/**
 * filter xss
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var FilterCSS = (__webpack_require__(/*! cssfilter */ "./node_modules/cssfilter/lib/index.js").FilterCSS);
var DEFAULT = __webpack_require__(/*! ./default */ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/default.js");
var parser = __webpack_require__(/*! ./parser */ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/parser.js");
var parseTag = parser.parseTag;
var parseAttr = parser.parseAttr;
var _ = __webpack_require__(/*! ./util */ "./node_modules/@avalabs/core-wallets-sdk/node_modules/xss/lib/util.js");

/**
 * returns `true` if the input value is `undefined` or `null`
 *
 * @param {Object} obj
 * @return {Boolean}
 */
function isNull(obj) {
  return obj === undefined || obj === null;
}

/**
 * get attributes for a tag
 *
 * @param {String} html
 * @return {Object}
 *   - {String} html
 *   - {Boolean} closing
 */
function getAttrs(html) {
  var i = _.spaceIndex(html);
  if (i === -1) {
    return {
      html: "",
      closing: html[html.length - 2] === "/",
    };
  }
  html = _.trim(html.slice(i + 1, -1));
  var isClosing = html[html.length - 1] === "/";
  if (isClosing) html = _.trim(html.slice(0, -1));
  return {
    html: html,
    closing: isClosing,
  };
}

/**
 * shallow copy
 *
 * @param {Object} obj
 * @return {Object}
 */
function shallowCopyObject(obj) {
  var ret = {};
  for (var i in obj) {
    ret[i] = obj[i];
  }
  return ret;
}

function keysToLowerCase(obj) {
  var ret = {};
  for (var i in obj) {
    if (Array.isArray(obj[i])) {
      ret[i.toLowerCase()] = obj[i].map(function (item) {
        return item.toLowerCase();
      });
    } else {
      ret[i.toLowerCase()] = obj[i];
    }
  }
  return ret;
}

/**
 * FilterXSS class
 *
 * @param {Object} options
 *        whiteList (or allowList), onTag, onTagAttr, onIgnoreTag,
 *        onIgnoreTagAttr, safeAttrValue, escapeHtml
 *        stripIgnoreTagBody, allowCommentTag, stripBlankChar
 *        css{whiteList, onAttr, onIgnoreAttr} `css=false` means don't use `cssfilter`
 */
function FilterXSS(options) {
  options = shallowCopyObject(options || {});

  if (options.stripIgnoreTag) {
    if (options.onIgnoreTag) {
      console.error(
        'Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'
      );
    }
    options.onIgnoreTag = DEFAULT.onIgnoreTagStripAll;
  }
  if (options.whiteList || options.allowList) {
    options.whiteList = keysToLowerCase(options.whiteList || options.allowList);
  } else {
    options.whiteList = DEFAULT.whiteList;
  }

  options.onTag = options.onTag || DEFAULT.onTag;
  options.onTagAttr = options.onTagAttr || DEFAULT.onTagAttr;
  options.onIgnoreTag = options.onIgnoreTag || DEFAULT.onIgnoreTag;
  options.onIgnoreTagAttr = options.onIgnoreTagAttr || DEFAULT.onIgnoreTagAttr;
  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;
  options.escapeHtml = options.escapeHtml || DEFAULT.escapeHtml;
  this.options = options;

  if (options.css === false) {
    this.cssFilter = false;
  } else {
    options.css = options.css || {};
    this.cssFilter = new FilterCSS(options.css);
  }
}

/**
 * start process and returns result
 *
 * @param {String} html
 * @return {String}
 */
FilterXSS.prototype.process = function (html) {
  // compatible with the input
  html = html || "";
  html = html.toString();
  if (!html) return "";

  var me = this;
  var options = me.options;
  var whiteList = options.whiteList;
  var onTag = options.onTag;
  var onIgnoreTag = options.onIgnoreTag;
  var onTagAttr = options.onTagAttr;
  var onIgnoreTagAttr = options.onIgnoreTagAttr;
  var safeAttrValue = options.safeAttrValue;
  var escapeHtml = options.escapeHtml;
  var cssFilter = me.cssFilter;

  // remove invisible characters
  if (options.stripBlankChar) {
    html = DEFAULT.stripBlankChar(html);
  }

  // remove html comments
  if (!options.allowCommentTag) {
    html = DEFAULT.stripCommentTag(html);
  }

  // if enable stripIgnoreTagBody
  var stripIgnoreTagBody = false;
  if (options.stripIgnoreTagBody) {
    stripIgnoreTagBody = DEFAULT.StripTagBody(
      options.stripIgnoreTagBody,
      onIgnoreTag
    );
    onIgnoreTag = stripIgnoreTagBody.onIgnoreTag;
  }

  var retHtml = parseTag(
    html,
    function (sourcePosition, position, tag, html, isClosing) {
      var info = {
        sourcePosition: sourcePosition,
        position: position,
        isClosing: isClosing,
        isWhite: Object.prototype.hasOwnProperty.call(whiteList, tag),
      };

      // call `onTag()`
      var ret = onTag(tag, html, info);
      if (!isNull(ret)) return ret;

      if (info.isWhite) {
        if (info.isClosing) {
          return "</" + tag + ">";
        }

        var attrs = getAttrs(html);
        var whiteAttrList = whiteList[tag];
        var attrsHtml = parseAttr(attrs.html, function (name, value) {
          // call `onTagAttr()`
          var isWhiteAttr = _.indexOf(whiteAttrList, name) !== -1;
          var ret = onTagAttr(tag, name, value, isWhiteAttr);
          if (!isNull(ret)) return ret;

          if (isWhiteAttr) {
            // call `safeAttrValue()`
            value = safeAttrValue(tag, name, value, cssFilter);
            if (value) {
              return name + '="' + value + '"';
            } else {
              return name;
            }
          } else {
            // call `onIgnoreTagAttr()`
            ret = onIgnoreTagAttr(tag, name, value, isWhiteAttr);
            if (!isNull(ret)) return ret;
            return;
          }
        });

        // build new tag html
        html = "<" + tag;
        if (attrsHtml) html += " " + attrsHtml;
        if (attrs.closing) html += " /";
        html += ">";
        return html;
      } else {
        // call `onIgnoreTag()`
        ret = onIgnoreTag(tag, html, info);
        if (!isNull(ret)) return ret;
        return escapeHtml(html);
      }
    },
    escapeHtml
  );

  // if enable stripIgnoreTagBody
  if (stripIgnoreTagBody) {
    retHtml = stripIgnoreTagBody.remove(retHtml);
  }

  return retHtml;
};

module.exports = FilterXSS;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXZhbGFic19jb3JlLXdhbGxldHMtc2RrX2VzbV9BdmFsYW5jaGVfd2FsbGV0c19XYWxsZXRBYnN0cmFjdF9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQTZDLG9CQUFvQix3QkFBd0IsK0NBQStDLGlCQUFpQixFQUFFLGFBQWEscUJBQXFCLGlCQUFpQixFQUFFLGtCQUFrQixTQUFTLHNCQUFzQiwyRUFBMkUsR0FBRyxhQUFhLE1BQU0sbUJBQW1CLDJCQUEyQiwrREFBUyxJQUFJLGdCQUFnQixtQkFBbUIsa0JBQWtCLEVBQUUsa0JBQWtCLFNBQWtFOzs7Ozs7Ozs7Ozs7Ozs7O0FDQXhpQixzQkFBc0IsMERBQTBELFlBQVksRUFBRSxhQUFhLHFCQUFxQixPQUFPLGdGQUFnRixTQUEyQzs7Ozs7Ozs7Ozs7Ozs7OztBQ0FsUSxhQUFhLDBDQUFrRTs7Ozs7Ozs7Ozs7Ozs7OztBQ0EvRSxrQkFBa0IsMkJBQTJCLFlBQVksV0FBVyxLQUFLLGFBQWEsa0NBQWtDLGtDQUFrQyxTQUFTLEdBQXdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQTFELGNBQWMsUUFBUSwwREFBQyxpQkFBaUIsVUFBVSxtRUFBYSxJQUFJLHFGQUFxRixvREFBQyx3QkFBd0Isb0RBQUMscURBQXFELCtDQUErQyxnQkFBZ0Isb0JBQW9CLFVBQVUsbUVBQWEsSUFBSSxJQUFJLE9BQU8sb0RBQUMsK0NBQStDLGdDQUFzSjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0F1RixNQUFNLHNCQUFzQixDQUFDLHVEQUFDLENBQUMsUUFBUSxlQUFlLGdCQUFnQixlQUFlLGdCQUFnQixjQUFjLHFCQUFxQixrQkFBa0IsZ0NBQWdDLE9BQU8sMkVBQUMseUJBQXlCLGlCQUFpQixnQ0FBZ0MsT0FBTyxvRkFBQywyQkFBMkIsMEJBQTBCLHVFQUF1RSw4REFBOEQsT0FBTywyRUFBQyx5QkFBeUIsMkJBQTJCLEVBQUUsaUJBQWlCLDZCQUE2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ZHVsZXMvQGF2YWxhYnMvY29yZS13YWxsZXRzLXNkay9lc20vQXZhbGFuY2hlL3V0aWxzL2dldEFsbFVUWE9zLmpzIiwid2VicGFjazovL2F2YWxhbmNoZS1leHRlbnNpb24vLi9ub2RlX21vZHVsZXMvQGF2YWxhYnMvY29yZS13YWxsZXRzLXNkay9lc20vQXZhbGFuY2hlL3V0aWxzL2dldFN0YWtlRm9yQWRkcmVzc2VzLmpzIiwid2VicGFjazovL2F2YWxhbmNoZS1leHRlbnNpb24vLi9ub2RlX21vZHVsZXMvQGF2YWxhYnMvY29yZS13YWxsZXRzLXNkay9lc20vQXZhbGFuY2hlL3V0aWxzL2dldFVuaXhOb3cuanMiLCJ3ZWJwYWNrOi8vYXZhbGFuY2hlLWV4dGVuc2lvbi8uL25vZGVfbW9kdWxlcy9AYXZhbGFicy9jb3JlLXdhbGxldHMtc2RrL2VzbS9BdmFsYW5jaGUvdXRpbHMvb3JkZXJCeS5qcyIsIndlYnBhY2s6Ly9hdmFsYW5jaGUtZXh0ZW5zaW9uLy4vbm9kZV9tb2R1bGVzL0BhdmFsYWJzL2NvcmUtd2FsbGV0cy1zZGsvZXNtL0F2YWxhbmNoZS91dGlscy9zb3J0VVRYT3MuanMiLCJ3ZWJwYWNrOi8vYXZhbGFuY2hlLWV4dGVuc2lvbi8uL25vZGVfbW9kdWxlcy9AYXZhbGFicy9jb3JlLXdhbGxldHMtc2RrL2VzbS9BdmFsYW5jaGUvd2FsbGV0cy9XYWxsZXRBYnN0cmFjdC5qcyIsIndlYnBhY2s6Ly9hdmFsYW5jaGUtZXh0ZW5zaW9uLy4vbm9kZV9tb2R1bGVzL0BhdmFsYWJzL2NvcmUtd2FsbGV0cy1zZGsvZXNtL3V0aWxzL2Fzc2VydEZlZVN0YXRlUHJvdmlkZWQuanMiLCJ3ZWJwYWNrOi8vYXZhbGFuY2hlLWV4dGVuc2lvbi8uL25vZGVfbW9kdWxlcy9AYXZhbGFicy9jb3JlLXdhbGxldHMtc2RrL25vZGVfbW9kdWxlcy94c3MvbGliL2RlZmF1bHQuanMiLCJ3ZWJwYWNrOi8vYXZhbGFuY2hlLWV4dGVuc2lvbi8uL25vZGVfbW9kdWxlcy9AYXZhbGFicy9jb3JlLXdhbGxldHMtc2RrL25vZGVfbW9kdWxlcy94c3MvbGliL2luZGV4LmpzIiwid2VicGFjazovL2F2YWxhbmNoZS1leHRlbnNpb24vLi9ub2RlX21vZHVsZXMvQGF2YWxhYnMvY29yZS13YWxsZXRzLXNkay9ub2RlX21vZHVsZXMveHNzL2xpYi9wYXJzZXIuanMiLCJ3ZWJwYWNrOi8vYXZhbGFuY2hlLWV4dGVuc2lvbi8uL25vZGVfbW9kdWxlcy9AYXZhbGFicy9jb3JlLXdhbGxldHMtc2RrL25vZGVfbW9kdWxlcy94c3MvbGliL3V0aWwuanMiLCJ3ZWJwYWNrOi8vYXZhbGFuY2hlLWV4dGVuc2lvbi8uL25vZGVfbW9kdWxlcy9AYXZhbGFicy9jb3JlLXdhbGxldHMtc2RrL25vZGVfbW9kdWxlcy94c3MvbGliL3hzcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnR7dXRpbHMgYXMgZX1mcm9tXCJAYXZhbGFicy9hdmFsYW5jaGVqc1wiO2NvbnN0IHQ9MTAyNCxuPTEwMjQ7YXN5bmMgZnVuY3Rpb24gcyhlLG4sYSl7Y29uc3Qgbz1lLnNsaWNlKDAsdCksYz1lLnNsaWNlKHQpLGk9YXdhaXQgcihuLHsuLi5hLGFkZHJlc3NlczpvfSk7aWYoYy5sZW5ndGgpe2NvbnN0IHQ9YXdhaXQgcyhjLG4sey4uLmEsYWRkcmVzc2VzOmV9KTtyZXR1cm4gaS5tZXJnZSh0KX1yZXR1cm4gaX1hc3luYyBmdW5jdGlvbiByKHMsYSl7aWYoYS5hZGRyZXNzZXMubGVuZ3RoPnQpdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IGdldCBVVFhPcyBmb3IgbW9yZSB0aGFuICR7dH0gYWRkcmVzc2VzLmApO2NvbnN0e2VuZEluZGV4Om8sdXR4b3M6Y309YXdhaXQgcy5nZXRVVFhPcyhhKSxpPW5ldyBlLlV0eG9TZXQoYyk7aWYoYy5sZW5ndGg+PW4pe2NvbnN0IGU9YXdhaXQgcihzLHsuLi5hLHN0YXJ0SW5kZXg6b30pO3JldHVybiBpLm1lcmdlKGUpfXJldHVybiBpfWV4cG9ydHtyIGFzIGdldFBhZ2luYXRlZFVUWE9zLHMgYXMgZ2V0VVRYT3NGb3JBZGRyZXNzZXN9O1xuIiwiYXN5bmMgZnVuY3Rpb24gdChzLGUpe2NvbnN0IGE9cy5zbGljZSgwLDI1NiksdT1zLnNsaWNlKDI1NiksZD1hd2FpdCBlLmdldFN0YWtlKHthZGRyZXNzZXM6YX0pO2lmKHUubGVuZ3RoKXtjb25zdCBzPWF3YWl0IHQodSxlKTtyZXR1cm57c3Rha2VkOmQuc3Rha2VkK3Muc3Rha2VkLHN0YWtlZE91dHB1dHM6Wy4uLmQuc3Rha2VkT3V0cHV0cywuLi5zLnN0YWtlZE91dHB1dHNdfX1yZXR1cm4gZH1leHBvcnR7dCBhcyBnZXRTdGFrZUZvckFkZHJlc3Nlc307XG4iLCJmdW5jdGlvbiB0KCl7cmV0dXJuIEJpZ0ludChNYXRoLmZsb29yKERhdGUubm93KCkvMWUzKSl9ZXhwb3J0e3QgYXMgZ2V0VW5peE5vd307XG4iLCJmdW5jdGlvbiByKHIsdCxuKXtyZXR1cm5bLi4ucl0uc29ydCgoKHIsZSk9Pntmb3IobGV0IG89MDtvPHQubGVuZ3RoO28rKyl7Y29uc3QgdT10W29dO2lmKHJbdV0+ZVt1XSlyZXR1cm5cImFzY1wiPT09bj8xOi0xO2lmKHJbdV08ZVt1XSlyZXR1cm5cImFzY1wiPT09bj8tMToxfXJldHVybiAwfSkpfWV4cG9ydHtyIGFzIG9yZGVyQnl9O1xuIiwiaW1wb3J0e3V0aWxzIGFzIHR9ZnJvbVwiQGF2YWxhYnMvYXZhbGFuY2hlanNcIjtpbXBvcnR7Z2V0VW5peE5vdyBhcyBvfWZyb21cIi4vZ2V0VW5peE5vdy5qc1wiO2ltcG9ydHtvcmRlckJ5IGFzIGV9ZnJvbVwiLi9vcmRlckJ5LmpzXCI7ZnVuY3Rpb24gYShhKXtjb25zdCBtPW8oKSxuPWEubWFwKChvPT4oe3V0eG86bywuLi50LmdldFV0eG9JbmZvKG8pfSkpKSxyPW4uZmlsdGVyKCh0PT50LnN0YWtlYWJsZUxvY2t0aW1lPD1tKSkscz1uLmZpbHRlcigodD0+dC5zdGFrZWFibGVMb2NrdGltZT5tKSksYz1lKHIsW1wiYW1vdW50XCJdLFwiZGVzY1wiKSxpPWUocyxbXCJzdGFrZWFibGVMb2NrdGltZVwiLFwiYW1vdW50XCJdLFwiZGVzY1wiKSxbdSwuLi5mXT1jO3JldHVyblsuLi51P1t1XTpbXSwuLi5pLC4uLmZdLm1hcCgodD0+dC51dHhvKSl9ZnVuY3Rpb24gbShvLGEpe2NvbnN0IG09by5tYXAoKG89Pih7dXR4bzpvLC4uLnQuZ2V0VXR4b0luZm8obyl9KSkpO3JldHVybiBlKG0sW1wiYW1vdW50XCJdLGE/XCJkZXNjXCI6XCJhc2NcIikubWFwKCh0PT50LnV0eG8pKX1jb25zdCBuPXQ9Pm0odCwhMCkscj10PT5tKHQsITEpO2V4cG9ydHttIGFzIHNvcnRVVFhPc0J5QW1vdW50LHIgYXMgc29ydFVUWE9zQnlBbW91bnRBc2NlbmRpbmcsbiBhcyBzb3J0VVRYT3NCeUFtb3VudERlc2NlbmRpbmcsYSBhcyBzb3J0VVRYT3NTdGFraW5nfTtcbiIsImltcG9ydHtUcmFuc2ZlcmFibGVPdXRwdXQgYXMgZSxhdm0gYXMgcyxwdm0gYXMgdCxldm0gYXMgcixwdm1TZXJpYWwgYXMgZCx1dGlscyBhcyBuLFBDaGFpbk93bmVyIGFzIG8sTDFWYWxpZGF0b3IgYXMgaSxuZXR3b3JrSURzIGFzIGF9ZnJvbVwiQGF2YWxhYnMvYXZhbGFuY2hlanNcIjtpbXBvcnRcIi4uL3V0aWxzL3BvcHVsYXRlQ3JlZGVudGlhbC5qc1wiO2ltcG9ydFwiQGF2YWxhYnMvZ2xhY2llci1zZGtcIjtpbXBvcnR7c3RyaXAweCBhcyBtfWZyb21cIkBhdmFsYWJzL2NvcmUtdXRpbHMtc2RrXCI7aW1wb3J0XCJldGhlcnNcIjtpbXBvcnRcIi4uL3Byb3ZpZGVycy9jb25zdGFudHMuanNcIjtpbXBvcnRcIkBhdmFsYWJzL2NvcmUtY2hhaW5zLXNka1wiO2ltcG9ydFwiY3JlYXRlLWhhc2hcIjtpbXBvcnRcImJpcDMyXCI7aW1wb3J0e2dldFVUWE9zRm9yQWRkcmVzc2VzIGFzIGh9ZnJvbVwiLi4vdXRpbHMvZ2V0QWxsVVRYT3MuanNcIjtpbXBvcnR7Z2V0U3Rha2VGb3JBZGRyZXNzZXMgYXMgZ31mcm9tXCIuLi91dGlscy9nZXRTdGFrZUZvckFkZHJlc3Nlcy5qc1wiO2ltcG9ydFwiYmlwMzlcIjtpbXBvcnRcInhzc1wiO2ltcG9ydHtzb3J0VVRYT3NCeUFtb3VudCBhcyB1LHNvcnRVVFhPc0J5QW1vdW50QXNjZW5kaW5nIGFzIEEsc29ydFVUWE9zU3Rha2luZyBhcyBjfWZyb21cIi4uL3V0aWxzL3NvcnRVVFhPcy5qc1wiO2ltcG9ydFwiYmlwMzItcGF0aFwiO2ltcG9ydHthc3NlcnRGZWVTdGF0ZVByb3ZpZGVkIGFzIHB9ZnJvbVwiLi4vLi4vdXRpbHMvYXNzZXJ0RmVlU3RhdGVQcm92aWRlZC5qc1wiO2NvbnN0e3BhcnNlOmYsaGV4VG9CdWZmZXI6eH09bjtjbGFzcyBse2NvbnN0cnVjdG9yKGUpe3RoaXMucHJvdmlkZXI9ZX1zZXRQcm92aWRlcihlKXt0aGlzLnByb3ZpZGVyPWV9Z2V0UHJvdmlkZXIoKXtyZXR1cm4gdGhpcy5wcm92aWRlcn1hc3luYyBnZXRVVFhPcyhlKXtjb25zdCBzPXRoaXMucHJvdmlkZXIuZ2V0QXBpKGUpO3JldHVybiBoKHRoaXMuZ2V0QWRkcmVzc2VzKGUpLHMpfWFzeW5jIGdldFN0YWtlKCl7Y29uc3QgZT10aGlzLnByb3ZpZGVyLmdldEFwaVAoKTtyZXR1cm4gZyh0aGlzLmdldEFkZHJlc3NlcyhcIlBcIiksZSl9YXN5bmMgZ2V0QXRvbWljVVRYT3MoZSxzKXtpZihlPT09cyl0aHJvdyBuZXcgRXJyb3IoXCJDaGFpbiBjYW4gbm90IGJlIHRoZSBzYW1lIGFzIHNvdXJjZSBjaGFpbi5cIik7Y29uc3QgdD10aGlzLnByb3ZpZGVyLmdldEFwaShlKSxyPXRoaXMucHJvdmlkZXIuZ2V0Q2hhaW5JRChzKTtyZXR1cm4gaCh0aGlzLmdldEFkZHJlc3NlcyhlKSx0LHtzb3VyY2VDaGFpbjpyLGFkZHJlc3NlczpbXX0pfWFzeW5jIGdldE5vbmNlKCl7Y29uc3QgZT10aGlzLmdldEFkZHJlc3NFVk0oKTtyZXR1cm4gYXdhaXQgdGhpcy5wcm92aWRlci5ldm1ScGMuZ2V0VHJhbnNhY3Rpb25Db3VudChlKX1leHBvcnRYKHQscixkLG4pe249bnx8dGhpcy5nZXRDdXJyZW50QWRkcmVzcyhkKTtjb25zdCBvPWYobilbMl0saT10aGlzLnByb3ZpZGVyLmdldEF2YXhJRCgpLGE9ZS5mcm9tTmF0aXZlKGksdCxbb10pLG09dShyLmdldFVUWE9zKCksITApLGg9dGhpcy5wcm92aWRlci5nZXRDaGFpbklEKGQpLGc9dGhpcy5nZXRBZGRyZXNzZXMoXCJYXCIpLm1hcCgoZT0+ZihlKVsyXSkpLEE9Zih0aGlzLmdldENoYW5nZUFkZHJlc3MoXCJYXCIpKVsyXTtyZXR1cm4gcy5uZXdFeHBvcnRUeCh0aGlzLnByb3ZpZGVyLmdldENvbnRleHQoKSxoLGcsbSxbYV0se3RocmVzaG9sZDoxLGNoYW5nZUFkZHJlc3NlczpbQV19KX1pbXBvcnRQKHt1dHhvU2V0OmUsc291cmNlQ2hhaW46cyx0b0FkZHJlc3M6cix0aHJlc2hvbGQ6ZCxmZWVTdGF0ZTpuLGxvY2t0aW1lOm99KXtjb25zdCBpPXRoaXMucHJvdmlkZXIuZ2V0Q2hhaW5JRChzKSxhPXRoaXMuZ2V0QWRkcmVzc2VzKFwiUFwiKS5tYXAoKGU9PmYoZSlbMl0pKTtmKHRoaXMuZ2V0Q2hhbmdlQWRkcmVzcyhcIlBcIikpWzJdLHI9cnx8dGhpcy5nZXRDdXJyZW50QWRkcmVzcyhcIlBcIik7Y29uc3QgbT1mKHIpWzJdLGg9ZS5nZXRVVFhPcygpO3JldHVybiBwKG4pLHQubmV3SW1wb3J0VHgoe2Zyb21BZGRyZXNzZXNCeXRlczphLHV0eG9zOmgsdG9BZGRyZXNzZXNCeXRlczpbbV0sc291cmNlQ2hhaW5JZDppLHRocmVzaG9sZDpkLGZlZVN0YXRlOm4sbG9ja3RpbWU6b30sdGhpcy5wcm92aWRlci5nZXRDb250ZXh0KCkpfWltcG9ydFgoZSx0LHIpe2NvbnN0IGQ9dGhpcy5wcm92aWRlci5nZXRDaGFpbklEKHQpLG49dGhpcy5nZXRBZGRyZXNzZXMoXCJYXCIpLm1hcCgoZT0+ZihlKVsyXSkpLG89Zih0aGlzLmdldENoYW5nZUFkZHJlc3MoXCJYXCIpKVsyXTtyPXJ8fHRoaXMuZ2V0Q3VycmVudEFkZHJlc3MoXCJYXCIpO2NvbnN0IGk9ZihyKVsyXTtyZXR1cm4gcy5uZXdJbXBvcnRUeCh0aGlzLnByb3ZpZGVyLmdldENvbnRleHQoKSxkLGUuZ2V0VVRYT3MoKSxbaV0sbix7Y2hhbmdlQWRkcmVzc2VzOltvXX0pfWltcG9ydEMoZSxzLHQsZCxuKXtjb25zdCBvPXRoaXMucHJvdmlkZXIuZ2V0Q2hhaW5JRChzKSxpPXRoaXMuZ2V0QWRkcmVzc2VzKFwiQ1wiKS5tYXAoKGU9PmYoZSlbMl0pKTtuPW58fHRoaXMuZ2V0QWRkcmVzc0VWTSgpO2NvbnN0IGE9QnVmZmVyLmZyb20obShuKSxcImhleFwiKTtyZXR1cm4gci5uZXdJbXBvcnRUeEZyb21CYXNlRmVlKHRoaXMucHJvdmlkZXIuZ2V0Q29udGV4dCgpLGEsaSxlLmdldFVUWE9zKCksbyx0LGQpfWV4cG9ydEMoZSxzLHQsZCxuKXtjb25zdCBvPXgodGhpcy5nZXRBZGRyZXNzRVZNKCkpLGk9dGhpcy5wcm92aWRlci5nZXRDaGFpbklEKHMpO249bnx8dGhpcy5nZXRDdXJyZW50QWRkcmVzcyhzKTtjb25zdCBhPWYobilbMl0sbT1kL0JpZ0ludCgxZTkpO3JldHVybiByLm5ld0V4cG9ydFR4RnJvbUJhc2VGZWUodGhpcy5wcm92aWRlci5nZXRDb250ZXh0KCksbSxlLGksbyxbYV0sdCl9ZXhwb3J0UCh7YW1vdW50OnMsdXR4b1NldDpyLGRlc3RpbmF0aW9uOmQsZmVlU3RhdGU6bix0b0FkZHJlc3M6b30pe289b3x8dGhpcy5nZXRDdXJyZW50QWRkcmVzcyhkKTtjb25zdCBpPWYobylbMl0sYT10aGlzLnByb3ZpZGVyLmdldEF2YXhJRCgpLG09ZS5mcm9tTmF0aXZlKGEscyxbaV0pLGg9dShyLmdldFVUWE9zKCksITApLGc9dGhpcy5wcm92aWRlci5nZXRDaGFpbklEKGQpLEE9dGhpcy5nZXRBZGRyZXNzZXMoXCJQXCIpLm1hcCgoZT0+ZihlKVsyXSkpLGM9Zih0aGlzLmdldENoYW5nZUFkZHJlc3MoXCJQXCIpKVsyXTtyZXR1cm4gcChuKSx0Lm5ld0V4cG9ydFR4KHtjaGFuZ2VBZGRyZXNzZXNCeXRlczpbY10sZnJvbUFkZHJlc3Nlc0J5dGVzOkEsdXR4b3M6aCxvdXRwdXRzOlttXSxkZXN0aW5hdGlvbkNoYWluSWQ6ZyxmZWVTdGF0ZTpufSx0aGlzLnByb3ZpZGVyLmdldENvbnRleHQoKSl9Y29uc29saWRhdGVQKHt1dHhvU2V0OnMsYW1vdW50OnIsZmVlU3RhdGU6ZCx0b0FkZHJlc3M6bixvcHRpb25zOm99KXtjb25zdCBpPUEocy5nZXRVVFhPcygpKTtuPW4/P3RoaXMuZ2V0Q3VycmVudEFkZHJlc3MoXCJQXCIpO2NvbnN0IGE9ZihuKVsyXSxtPXRoaXMucHJvdmlkZXIuZ2V0Q29udGV4dCgpLGg9W2UuZnJvbU5hdGl2ZShtLmF2YXhBc3NldElELHIsW2FdKV0sZz10aGlzLmdldEFkZHJlc3NlcyhcIlBcIikubWFwKChlPT5mKGUpWzJdKSksdT1mKHRoaXMuZ2V0Q2hhbmdlQWRkcmVzcyhcIlBcIikpWzJdLGM9bz8uY2hhbmdlQWRkcmVzc2VzPz9bdV07cmV0dXJuIHAoZCksdC5uZXdCYXNlVHgoe2NoYW5nZUFkZHJlc3Nlc0J5dGVzOmMsZnJvbUFkZHJlc3Nlc0J5dGVzOmcsdXR4b3M6aSxvdXRwdXRzOmgsbWluSXNzdWFuY2VUaW1lOm8/Lm1pbklzc3VhbmNlVGltZSxtZW1vOm8/Lm1lbW8sZmVlU3RhdGU6ZH0sbSl9YmFzZVRYKHt1dHhvU2V0OnIsY2hhaW46ZCx0b0FkZHJlc3M6bixhbW91bnRzUGVyQXNzZXQ6byxmZWVTdGF0ZTppLG9wdGlvbnM6YSxmcm9tQWRkcmVzc2VzOm19KXtjb25zdFtoLGcsQV09ZihuKTtpZihoIT09ZHx8ZyE9PXRoaXMucHJvdmlkZXIuZ2V0SHJwKCkpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJlY2lwaWVudCBhZGRyZXNzIFwiJHtufVwiYCk7Y29uc3QgYz1PYmplY3QuZW50cmllcyhvKS5tYXAoKChbcyx0XSk9PmUuZnJvbU5hdGl2ZShzLHQsW0FdKSkpLHg9dShyLmdldFVUWE9zKCksITApLGw9KG0/P3RoaXMuZ2V0QWRkcmVzc2VzKGQpKS5tYXAoKGU9PmYoZSlbMl0pKSxJPWYodGhpcy5nZXRDaGFuZ2VBZGRyZXNzKFwiUFwiKSlbMl0sVD1hPy5jaGFuZ2VBZGRyZXNzZXM/P1tJXTtyZXR1cm5cIlhcIj09PWQ/cy5uZXdCYXNlVHgodGhpcy5wcm92aWRlci5nZXRDb250ZXh0KCksbCx4LGMsYSk6KHAoaSksdC5uZXdCYXNlVHgoe2NoYW5nZUFkZHJlc3Nlc0J5dGVzOlQsZnJvbUFkZHJlc3Nlc0J5dGVzOmwsdXR4b3M6eCxvdXRwdXRzOmMsbWluSXNzdWFuY2VUaW1lOmE/Lm1pbklzc3VhbmNlVGltZSxtZW1vOmE/Lm1lbW8sZmVlU3RhdGU6aX0sdGhpcy5wcm92aWRlci5nZXRDb250ZXh0KCkpKX1jb252ZXJ0U3VibmV0VG9MMSh7dXR4b1NldDplLGNoYWluSWQ6cyxzdWJuZXRJZDpyLHN1Ym5ldEF1dGg6YSxmZWVTdGF0ZTptLGFkZHJlc3M6aCx2YWxpZGF0b3JzOmcsb3B0aW9uczpBLGZyb21BZGRyZXNzZXM6Y30pe2NvbnN0IHA9KGM/P3RoaXMuZ2V0QWRkcmVzc2VzKFwiUFwiKSkubWFwKChlPT5mKGUpWzJdKSkseD1mKHRoaXMuZ2V0Q2hhbmdlQWRkcmVzcyhcIlBcIikpWzJdLGw9QT8uY2hhbmdlQWRkcmVzc2VzPz9beF0sST1nLm1hcCgoKHtub2RlSWQ6ZSxwdWJLZXk6cyxzaWduYXR1cmU6dCxiYWxhbmNlOnIsd2VpZ2h0OmEsZGVhY3RpdmF0aW9uT3duZXI6bSxyZW1haW5pbmdCYWxhbmNlT3duZXI6aH0pPT57Y29uc3QgZz1uZXcgZC5Qcm9vZk9mUG9zc2Vzc2lvbihVaW50OEFycmF5LmZyb20obi5oZXhUb0J1ZmZlcihzKSksVWludDhBcnJheS5mcm9tKG4uaGV4VG9CdWZmZXIodCkpKSx1PW8uZnJvbU5hdGl2ZShoLmFkZHJlc3Nlcy5tYXAoKGU9PmYoZSlbMl0pKSxoLnRocmVzaG9sZD8/MSksQT1vLmZyb21OYXRpdmUobS5hZGRyZXNzZXMubWFwKChlPT5mKGUpWzJdKSksbS50aHJlc2hvbGQ/PzEpO3JldHVybiBpLmZyb21OYXRpdmUoZSxhLHIsZyx1LEEpfSkpO3JldHVybiB0Lm5ld0NvbnZlcnRTdWJuZXRUb0wxVHgoe2NoYW5nZUFkZHJlc3Nlc0J5dGVzOmwsdmFsaWRhdG9yczpJLGZyb21BZGRyZXNzZXNCeXRlczpwLGFkZHJlc3M6ZihoKVsyXSxjaGFpbklkOnMsc3VibmV0SWQ6cixzdWJuZXRBdXRoOmEsZmVlU3RhdGU6bSx1dHhvczp1KGUuZ2V0VVRYT3MoKSwhMCl9LHRoaXMucHJvdmlkZXIuZ2V0Q29udGV4dCgpKX1yZWdpc3RlckwxVmFsaWRhdG9yKHt1dHhvU2V0OmUsYmFsYW5jZTpzLHNpZ25hdHVyZTpyLG1lc3NhZ2U6ZCxmZWVTdGF0ZTpvLGZyb21BZGRyZXNzZXM6aSxvcHRpb25zOmF9KXtjb25zdCBtPShpPz90aGlzLmdldEFkZHJlc3NlcyhcIlBcIikpLm1hcCgoZT0+ZihlKVsyXSkpLGg9Zih0aGlzLmdldENoYW5nZUFkZHJlc3MoXCJQXCIpKVsyXSxnPWE/LmNoYW5nZUFkZHJlc3Nlcz8/W2hdO3JldHVybiB0Lm5ld1JlZ2lzdGVyTDFWYWxpZGF0b3JUeCh7dXR4b3M6dShlLmdldFVUWE9zKCksITApLGJhbGFuY2U6cyxibHNTaWduYXR1cmU6VWludDhBcnJheS5mcm9tKG4uaGV4VG9CdWZmZXIocikpLGNoYW5nZUFkZHJlc3Nlc0J5dGVzOmcsZmVlU3RhdGU6byxmcm9tQWRkcmVzc2VzQnl0ZXM6bSxtZW1vOmE/Lm1lbW8sbWVzc2FnZTpVaW50OEFycmF5LmZyb20obi5oZXhUb0J1ZmZlcihkKSksbWluSXNzdWFuY2VUaW1lOmE/Lm1pbklzc3VhbmNlVGltZX0sdGhpcy5wcm92aWRlci5nZXRDb250ZXh0KCkpfXNldEwxVmFsaWRhdG9yV2VpZ2h0KHt1dHhvU2V0OmUsZmVlU3RhdGU6cyxtZXNzYWdlOnIsb3B0aW9uczpkLGZyb21BZGRyZXNzZXM6b30pe2NvbnN0IGk9KG8/P3RoaXMuZ2V0QWRkcmVzc2VzKFwiUFwiKSkubWFwKChlPT5mKGUpWzJdKSksYT1mKHRoaXMuZ2V0Q2hhbmdlQWRkcmVzcyhcIlBcIikpWzJdLG09ZD8uY2hhbmdlQWRkcmVzc2VzPz9bYV07cmV0dXJuIHQubmV3U2V0TDFWYWxpZGF0b3JXZWlnaHRUeCh7dXR4b3M6dShlLmdldFVUWE9zKCksITApLGNoYW5nZUFkZHJlc3Nlc0J5dGVzOm0sZmVlU3RhdGU6cyxmcm9tQWRkcmVzc2VzQnl0ZXM6aSxtZW1vOmQ/Lm1lbW8sbWVzc2FnZTpVaW50OEFycmF5LmZyb20obi5oZXhUb0J1ZmZlcihyKSksbWluSXNzdWFuY2VUaW1lOmQ/Lm1pbklzc3VhbmNlVGltZX0sdGhpcy5wcm92aWRlci5nZXRDb250ZXh0KCkpfWRpc2FibGVMMVZhbGlkYXRvcih7dXR4b1NldDplLGZlZVN0YXRlOnMsb3B0aW9uczpyLGZyb21BZGRyZXNzZXM6ZCxkaXNhYmxlQXV0aDpuLHZhbGlkYXRpb25JZDpvfSl7Y29uc3QgaT0oZD8/dGhpcy5nZXRBZGRyZXNzZXMoXCJQXCIpKS5tYXAoKGU9PmYoZSlbMl0pKSxhPWYodGhpcy5nZXRDaGFuZ2VBZGRyZXNzKFwiUFwiKSlbMl0sbT1yPy5jaGFuZ2VBZGRyZXNzZXM/P1thXTtyZXR1cm4gdC5uZXdEaXNhYmxlTDFWYWxpZGF0b3JUeCh7ZGlzYWJsZUF1dGg6bix2YWxpZGF0aW9uSWQ6byx1dHhvczp1KGUuZ2V0VVRYT3MoKSwhMCksY2hhbmdlQWRkcmVzc2VzQnl0ZXM6bSxmZWVTdGF0ZTpzLGZyb21BZGRyZXNzZXNCeXRlczppLG1lbW86cj8ubWVtbyxtaW5Jc3N1YW5jZVRpbWU6cj8ubWluSXNzdWFuY2VUaW1lfSx0aGlzLnByb3ZpZGVyLmdldENvbnRleHQoKSl9aW5jcmVhc2VMMVZhbGlkYXRvckJhbGFuY2Uoe3V0eG9TZXQ6ZSxmZWVTdGF0ZTpzLG9wdGlvbnM6cixmcm9tQWRkcmVzc2VzOmQsYmFsYW5jZTpuLHZhbGlkYXRpb25JZDpvfSl7Y29uc3QgaT0oZD8/dGhpcy5nZXRBZGRyZXNzZXMoXCJQXCIpKS5tYXAoKGU9PmYoZSlbMl0pKSxhPWYodGhpcy5nZXRDaGFuZ2VBZGRyZXNzKFwiUFwiKSlbMl0sbT1yPy5jaGFuZ2VBZGRyZXNzZXM/P1thXTtyZXR1cm4gdC5uZXdJbmNyZWFzZUwxVmFsaWRhdG9yQmFsYW5jZVR4KHtiYWxhbmNlOm4sdmFsaWRhdGlvbklkOm8sdXR4b3M6dShlLmdldFVUWE9zKCksITApLGNoYW5nZUFkZHJlc3Nlc0J5dGVzOm0sZmVlU3RhdGU6cyxmcm9tQWRkcmVzc2VzQnl0ZXM6aSxtZW1vOnI/Lm1lbW8sbWluSXNzdWFuY2VUaW1lOnI/Lm1pbklzc3VhbmNlVGltZX0sdGhpcy5wcm92aWRlci5nZXRDb250ZXh0KCkpfWNyZWF0ZUJsb2NrY2hhaW4oe3V0eG9TZXQ6ZSxzdWJuZXRJZDpzLGNoYWluTmFtZTpyLHZtSUQ6ZCxmeElkczpuLGdlbmVzaXNEYXRhOm8sc3VibmV0QXV0aDppLGZlZVN0YXRlOmEsb3B0aW9uczptLGZyb21BZGRyZXNzZXM6aH0pe2NvbnN0IGc9dShlLmdldFVUWE9zKCksITApLEE9KGg/P3RoaXMuZ2V0QWRkcmVzc2VzKFwiUFwiKSkubWFwKChlPT5mKGUpWzJdKSksYz1mKHRoaXMuZ2V0Q2hhbmdlQWRkcmVzcyhcIlBcIikpWzJdLHg9bT8uY2hhbmdlQWRkcmVzc2VzPz9bY107cmV0dXJuIHAoYSksdC5uZXdDcmVhdGVDaGFpblR4KHtjaGFpbk5hbWU6cixmZWVTdGF0ZTphLGZyb21BZGRyZXNzZXNCeXRlczpBLGZ4SWRzOm4sZ2VuZXNpc0RhdGE6byxzdWJuZXRBdXRoOmksc3VibmV0SWQ6cyx1dHhvczpnLHZtSWQ6ZCxjaGFuZ2VBZGRyZXNzZXNCeXRlczp4fSx0aGlzLnByb3ZpZGVyLmdldENvbnRleHQoKSl9Y3JlYXRlU3VibmV0KHt1dHhvU2V0OmUscmV3YXJkQWRkcmVzc2VzOnMsZmVlU3RhdGU6cixmcm9tQWRkcmVzc2VzOmQsb3B0aW9uczpuLHRocmVzaG9sZDpvLGxvY2t0aW1lOml9KXtjb25zdCBhPXUoZS5nZXRVVFhPcygpLCEwKSxtPShkPz90aGlzLmdldEFkZHJlc3NlcyhcIlBcIikpLm1hcCgoZT0+ZihlKVsyXSkpLGg9Zih0aGlzLmdldENoYW5nZUFkZHJlc3MoXCJQXCIpKVsyXSxnPW4/LmNoYW5nZUFkZHJlc3Nlcz8/W2hdLEE9cy5tYXAoKGU9PmYoZSlbMl0pKTtyZXR1cm4gcChyKSx0Lm5ld0NyZWF0ZVN1Ym5ldFR4KHtmcm9tQWRkcmVzc2VzQnl0ZXM6bSxjaGFuZ2VBZGRyZXNzZXNCeXRlczpnLHV0eG9zOmEsbWluSXNzdWFuY2VUaW1lOm4/Lm1pbklzc3VhbmNlVGltZSxtZW1vOm4/Lm1lbW8sZmVlU3RhdGU6cix0aHJlc2hvbGQ6byxsb2NrdGltZTppLHN1Ym5ldE93bmVyczpBfSx0aGlzLnByb3ZpZGVyLmdldENvbnRleHQoKSl9YWRkU3VibmV0VmFsaWRhdG9yKHt1dHhvU2V0OmUsbm9kZUlkOnMsc3RhcnQ6cixlbmQ6ZCx3ZWlnaHQ6bixzdWJuZXRJZDpvLHN1Ym5ldEF1dGg6aSxmZWVTdGF0ZTphLGZyb21BZGRyZXNzZXM6bSxvcHRpb25zOmh9KXtjb25zdCBnPXUoZS5nZXRVVFhPcygpLCEwKSxBPShtPz90aGlzLmdldEFkZHJlc3NlcyhcIlBcIikpLm1hcCgoZT0+ZihlKVsyXSkpLGM9Zih0aGlzLmdldENoYW5nZUFkZHJlc3MoXCJQXCIpKVsyXSx4PWg/LmNoYW5nZUFkZHJlc3Nlcz8/W2NdO3JldHVybiBwKGEpLHQubmV3QWRkU3VibmV0VmFsaWRhdG9yVHgoe2NoYW5nZUFkZHJlc3Nlc0J5dGVzOngsZnJvbUFkZHJlc3Nlc0J5dGVzOkEsdXR4b3M6ZyxtaW5Jc3N1YW5jZVRpbWU6aD8ubWluSXNzdWFuY2VUaW1lLG1lbW86aD8ubWVtbyxub2RlSWQ6cyxzdGFydDpyLGVuZDpkLHdlaWdodDpuLHN1Ym5ldElkOm8sc3VibmV0QXV0aDppLGZlZVN0YXRlOmF9LHRoaXMucHJvdmlkZXIuZ2V0Q29udGV4dCgpKX1hZGRQZXJtaXNzaW9ubGVzc1ZhbGlkYXRvcih7dXR4b1NldDplLG5vZGVJZDpzLHN0YXJ0OnIsZW5kOmQsd2VpZ2h0Om4sc3VibmV0SWQ6byxzaGFyZXM6aSxmZWVTdGF0ZTptLGZyb21BZGRyZXNzZXM6aCxyZXdhcmRBZGRyZXNzZXM6ZyxkZWxlZ2F0b3JSZXdhcmRBZGRyZXNzZXM6dSxwdWJsaWNLZXk6QSxzaWduYXR1cmU6eCxvcHRpb25zOmwsdGhyZXNob2xkOkksbG9ja3RpbWU6VCxzdGFraW5nQXNzZXRJZDp2fSl7Y29uc3QgQz1jKGUuZ2V0VVRYT3MoKSksUz0oaD8/dGhpcy5nZXRBZGRyZXNzZXMoXCJQXCIpKS5tYXAoKGU9PmYoZSlbMl0pKSxiPShnPz9bdGhpcy5nZXRDdXJyZW50QWRkcmVzcyhcIlBcIildKS5tYXAoKGU9PmYoZSlbMl0pKSx3PSh1Pz9bdGhpcy5nZXRDdXJyZW50QWRkcmVzcyhcIlBcIildKS5tYXAoKGU9PmYoZSlbMl0pKTtpZighKG8hPT1hLlByaW1hcnlOZXR3b3JrSUQudG9TdHJpbmcoKXx8QSYmeCkpdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIHB1YmxpYyBrZXkgYW5kIHNpZ25hdHVyZSBmb3IgcHJpbWFyeSBzdWJuZXQuXCIpO2NvbnN0IFA9Zih0aGlzLmdldENoYW5nZUFkZHJlc3MoXCJQXCIpKVsyXSxCPWw/LmNoYW5nZUFkZHJlc3Nlcz8/W1BdO3JldHVybiBwKG0pLHQubmV3QWRkUGVybWlzc2lvbmxlc3NWYWxpZGF0b3JUeCh7ZnJvbUFkZHJlc3Nlc0J5dGVzOlMsZGVsZWdhdG9yUmV3YXJkc093bmVyOncsdXR4b3M6QyxtaW5Jc3N1YW5jZVRpbWU6bD8ubWluSXNzdWFuY2VUaW1lLG1lbW86bD8ubWVtbyxjaGFuZ2VBZGRyZXNzZXNCeXRlczpCLG5vZGVJZDpzLHN0YXJ0OnIsZW5kOmQsd2VpZ2h0Om4sc3VibmV0SWQ6byxzaGFyZXM6aSxmZWVTdGF0ZTptLHB1YmxpY0tleTpBLHJld2FyZEFkZHJlc3NlczpiLHNpZ25hdHVyZTp4LGxvY2t0aW1lOlQsdGhyZXNob2xkOkksc3Rha2luZ0Fzc2V0SWQ6dn0sdGhpcy5wcm92aWRlci5nZXRDb250ZXh0KCkpfWFkZFBlcm1pc3Npb25sZXNzRGVsZWdhdG9yKHt1dHhvU2V0OmUsbm9kZUlkOnMsc3RhcnQ6cixlbmQ6ZCx3ZWlnaHQ6bixzdWJuZXRJZDpvLGZyb21BZGRyZXNzZXM6aSxyZXdhcmRBZGRyZXNzZXM6YSxvcHRpb25zOm0sbG9ja3RpbWU6aCxmZWVTdGF0ZTpnLHRocmVzaG9sZDp1LHN0YWtpbmdBc3NldElkOkF9KXtjb25zdCB4PWMoZS5nZXRVVFhPcygpKSxsPShpPz90aGlzLmdldEFkZHJlc3NlcyhcIlBcIikpLm1hcCgoZT0+ZihlKVsyXSkpLEk9KGE/P1t0aGlzLmdldEN1cnJlbnRBZGRyZXNzKFwiUFwiKV0pLm1hcCgoZT0+ZihlKVsyXSkpLFQ9Zih0aGlzLmdldENoYW5nZUFkZHJlc3MoXCJQXCIpKVsyXSx2PW0/LmNoYW5nZUFkZHJlc3Nlcz8/W1RdO3JldHVybiBwKGcpLHQubmV3QWRkUGVybWlzc2lvbmxlc3NEZWxlZ2F0b3JUeCh7ZnJvbUFkZHJlc3Nlc0J5dGVzOmwsdXR4b3M6eCxtaW5Jc3N1YW5jZVRpbWU6bT8ubWluSXNzdWFuY2VUaW1lLG1lbW86bT8ubWVtbyxjaGFuZ2VBZGRyZXNzZXNCeXRlczp2LG5vZGVJZDpzLHN0YXJ0OnIsZW5kOmQsd2VpZ2h0Om4sc3VibmV0SWQ6byxyZXdhcmRBZGRyZXNzZXM6SSxsb2NrdGltZTpoLHN0YWtpbmdBc3NldElkOkEsdGhyZXNob2xkOnUsZmVlU3RhdGU6Z30sdGhpcy5wcm92aWRlci5nZXRDb250ZXh0KCkpfXJlbW92ZVN1Ym5ldFZhbGlkYXRvcih7dXR4b1NldDplLG5vZGVJZDpzLHN1Ym5ldElkOnIsc3VibmV0QXV0aDpkLGZyb21BZGRyZXNzZXM6bixmZWVTdGF0ZTpvLG9wdGlvbnM6aX0pe2NvbnN0IGE9dShlLmdldFVUWE9zKCksITApLG09KG4/P3RoaXMuZ2V0QWRkcmVzc2VzKFwiUFwiKSkubWFwKChlPT5mKGUpWzJdKSksaD1mKHRoaXMuZ2V0Q2hhbmdlQWRkcmVzcyhcIlBcIikpWzJdLGc9aT8uY2hhbmdlQWRkcmVzc2VzPz9baF07cmV0dXJuIHAobyksdC5uZXdSZW1vdmVTdWJuZXRWYWxpZGF0b3JUeCh7Y2hhbmdlQWRkcmVzc2VzQnl0ZXM6Zyxmcm9tQWRkcmVzc2VzQnl0ZXM6bSx1dHhvczphLG1pbklzc3VhbmNlVGltZTppPy5taW5Jc3N1YW5jZVRpbWUsbWVtbzppPy5tZW1vLG5vZGVJZDpzLHN1Ym5ldElkOnIsc3VibmV0QXV0aDpkLGZlZVN0YXRlOm99LHRoaXMucHJvdmlkZXIuZ2V0Q29udGV4dCgpKX10cmFuc2ZlclN1Ym5ldE93bmVyc2hpcFR4KHt1dHhvU2V0OmUsc3VibmV0SWQ6cyxzdWJuZXRBdXRoOnIsc3VibmV0T3duZXJzOmQsZmVlU3RhdGU6bixmcm9tQWRkcmVzc2VzOm8sb3B0aW9uczppLHRocmVzaG9sZDphLGxvY2t0aW1lOm19KXtjb25zdCBoPXUoZS5nZXRVVFhPcygpLCEwKSxnPShvPz90aGlzLmdldEFkZHJlc3NlcyhcIlBcIikpLm1hcCgoZT0+ZihlKVsyXSkpLEE9Zih0aGlzLmdldENoYW5nZUFkZHJlc3MoXCJQXCIpKVsyXSxjPWk/LmNoYW5nZUFkZHJlc3Nlcz8/W0FdLHg9ZC5tYXAoKGU9PmYoZSlbMl0pKTtyZXR1cm4gcChuKSx0Lm5ld1RyYW5zZmVyU3VibmV0T3duZXJzaGlwVHgoe2NoYW5nZUFkZHJlc3Nlc0J5dGVzOmMsZnJvbUFkZHJlc3Nlc0J5dGVzOmcsdXR4b3M6aCxtaW5Jc3N1YW5jZVRpbWU6aT8ubWluSXNzdWFuY2VUaW1lLG1lbW86aT8ubWVtbyxzdWJuZXRJZDpzLHN1Ym5ldEF1dGg6cixzdWJuZXRPd25lcnM6eCxmZWVTdGF0ZTpuLHRocmVzaG9sZDphLGxvY2t0aW1lOm19LHRoaXMucHJvdmlkZXIuZ2V0Q29udGV4dCgpKX19ZXhwb3J0e2wgYXMgV2FsbGV0QWJzdHJhY3R9O1xuIiwiZnVuY3Rpb24gZShlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8IWUpdGhyb3cgbmV3IEVycm9yKFwiZmVlU3RhdGUgcGFyYW1ldGVyIGlzIHJlcXVpcmVkIHBvc3QgRS11cGdyYWRlXCIpfWV4cG9ydHtlIGFzIGFzc2VydEZlZVN0YXRlUHJvdmlkZWR9O1xuIiwiLyoqXG4gKiBkZWZhdWx0IHNldHRpbmdzXG4gKlxuICogQGF1dGhvciBab25nbWluIExlaTxsZWl6b25nbWluQGdtYWlsLmNvbT5cbiAqL1xuXG52YXIgRmlsdGVyQ1NTID0gcmVxdWlyZShcImNzc2ZpbHRlclwiKS5GaWx0ZXJDU1M7XG52YXIgZ2V0RGVmYXVsdENTU1doaXRlTGlzdCA9IHJlcXVpcmUoXCJjc3NmaWx0ZXJcIikuZ2V0RGVmYXVsdFdoaXRlTGlzdDtcbnZhciBfID0gcmVxdWlyZShcIi4vdXRpbFwiKTtcblxuZnVuY3Rpb24gZ2V0RGVmYXVsdFdoaXRlTGlzdCgpIHtcbiAgcmV0dXJuIHtcbiAgICBhOiBbXCJ0YXJnZXRcIiwgXCJocmVmXCIsIFwidGl0bGVcIl0sXG4gICAgYWJicjogW1widGl0bGVcIl0sXG4gICAgYWRkcmVzczogW10sXG4gICAgYXJlYTogW1wic2hhcGVcIiwgXCJjb29yZHNcIiwgXCJocmVmXCIsIFwiYWx0XCJdLFxuICAgIGFydGljbGU6IFtdLFxuICAgIGFzaWRlOiBbXSxcbiAgICBhdWRpbzogW1xuICAgICAgXCJhdXRvcGxheVwiLFxuICAgICAgXCJjb250cm9sc1wiLFxuICAgICAgXCJjcm9zc29yaWdpblwiLFxuICAgICAgXCJsb29wXCIsXG4gICAgICBcIm11dGVkXCIsXG4gICAgICBcInByZWxvYWRcIixcbiAgICAgIFwic3JjXCIsXG4gICAgXSxcbiAgICBiOiBbXSxcbiAgICBiZGk6IFtcImRpclwiXSxcbiAgICBiZG86IFtcImRpclwiXSxcbiAgICBiaWc6IFtdLFxuICAgIGJsb2NrcXVvdGU6IFtcImNpdGVcIl0sXG4gICAgYnI6IFtdLFxuICAgIGNhcHRpb246IFtdLFxuICAgIGNlbnRlcjogW10sXG4gICAgY2l0ZTogW10sXG4gICAgY29kZTogW10sXG4gICAgY29sOiBbXCJhbGlnblwiLCBcInZhbGlnblwiLCBcInNwYW5cIiwgXCJ3aWR0aFwiXSxcbiAgICBjb2xncm91cDogW1wiYWxpZ25cIiwgXCJ2YWxpZ25cIiwgXCJzcGFuXCIsIFwid2lkdGhcIl0sXG4gICAgZGQ6IFtdLFxuICAgIGRlbDogW1wiZGF0ZXRpbWVcIl0sXG4gICAgZGV0YWlsczogW1wib3BlblwiXSxcbiAgICBkaXY6IFtdLFxuICAgIGRsOiBbXSxcbiAgICBkdDogW10sXG4gICAgZW06IFtdLFxuICAgIGZpZ2NhcHRpb246IFtdLFxuICAgIGZpZ3VyZTogW10sXG4gICAgZm9udDogW1wiY29sb3JcIiwgXCJzaXplXCIsIFwiZmFjZVwiXSxcbiAgICBmb290ZXI6IFtdLFxuICAgIGgxOiBbXSxcbiAgICBoMjogW10sXG4gICAgaDM6IFtdLFxuICAgIGg0OiBbXSxcbiAgICBoNTogW10sXG4gICAgaDY6IFtdLFxuICAgIGhlYWRlcjogW10sXG4gICAgaHI6IFtdLFxuICAgIGk6IFtdLFxuICAgIGltZzogW1wic3JjXCIsIFwiYWx0XCIsIFwidGl0bGVcIiwgXCJ3aWR0aFwiLCBcImhlaWdodFwiXSxcbiAgICBpbnM6IFtcImRhdGV0aW1lXCJdLFxuICAgIGxpOiBbXSxcbiAgICBtYXJrOiBbXSxcbiAgICBuYXY6IFtdLFxuICAgIG9sOiBbXSxcbiAgICBwOiBbXSxcbiAgICBwcmU6IFtdLFxuICAgIHM6IFtdLFxuICAgIHNlY3Rpb246IFtdLFxuICAgIHNtYWxsOiBbXSxcbiAgICBzcGFuOiBbXSxcbiAgICBzdWI6IFtdLFxuICAgIHN1bW1hcnk6IFtdLFxuICAgIHN1cDogW10sXG4gICAgc3Ryb25nOiBbXSxcbiAgICBzdHJpa2U6IFtdLFxuICAgIHRhYmxlOiBbXCJ3aWR0aFwiLCBcImJvcmRlclwiLCBcImFsaWduXCIsIFwidmFsaWduXCJdLFxuICAgIHRib2R5OiBbXCJhbGlnblwiLCBcInZhbGlnblwiXSxcbiAgICB0ZDogW1wid2lkdGhcIiwgXCJyb3dzcGFuXCIsIFwiY29sc3BhblwiLCBcImFsaWduXCIsIFwidmFsaWduXCJdLFxuICAgIHRmb290OiBbXCJhbGlnblwiLCBcInZhbGlnblwiXSxcbiAgICB0aDogW1wid2lkdGhcIiwgXCJyb3dzcGFuXCIsIFwiY29sc3BhblwiLCBcImFsaWduXCIsIFwidmFsaWduXCJdLFxuICAgIHRoZWFkOiBbXCJhbGlnblwiLCBcInZhbGlnblwiXSxcbiAgICB0cjogW1wicm93c3BhblwiLCBcImFsaWduXCIsIFwidmFsaWduXCJdLFxuICAgIHR0OiBbXSxcbiAgICB1OiBbXSxcbiAgICB1bDogW10sXG4gICAgdmlkZW86IFtcbiAgICAgIFwiYXV0b3BsYXlcIixcbiAgICAgIFwiY29udHJvbHNcIixcbiAgICAgIFwiY3Jvc3NvcmlnaW5cIixcbiAgICAgIFwibG9vcFwiLFxuICAgICAgXCJtdXRlZFwiLFxuICAgICAgXCJwbGF5c2lubGluZVwiLFxuICAgICAgXCJwb3N0ZXJcIixcbiAgICAgIFwicHJlbG9hZFwiLFxuICAgICAgXCJzcmNcIixcbiAgICAgIFwiaGVpZ2h0XCIsXG4gICAgICBcIndpZHRoXCIsXG4gICAgXSxcbiAgfTtcbn1cblxudmFyIGRlZmF1bHRDU1NGaWx0ZXIgPSBuZXcgRmlsdGVyQ1NTKCk7XG5cbi8qKlxuICogZGVmYXVsdCBvblRhZyBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0YWdcbiAqIEBwYXJhbSB7U3RyaW5nfSBodG1sXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBvblRhZyh0YWcsIGh0bWwsIG9wdGlvbnMpIHtcbiAgLy8gZG8gbm90aGluZ1xufVxuXG4vKipcbiAqIGRlZmF1bHQgb25JZ25vcmVUYWcgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGFnXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gb25JZ25vcmVUYWcodGFnLCBodG1sLCBvcHRpb25zKSB7XG4gIC8vIGRvIG5vdGhpbmdcbn1cblxuLyoqXG4gKiBkZWZhdWx0IG9uVGFnQXR0ciBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0YWdcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gb25UYWdBdHRyKHRhZywgbmFtZSwgdmFsdWUpIHtcbiAgLy8gZG8gbm90aGluZ1xufVxuXG4vKipcbiAqIGRlZmF1bHQgb25JZ25vcmVUYWdBdHRyIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHRhZ1xuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBvbklnbm9yZVRhZ0F0dHIodGFnLCBuYW1lLCB2YWx1ZSkge1xuICAvLyBkbyBub3RoaW5nXG59XG5cbi8qKlxuICogZGVmYXVsdCBlc2NhcGVIdG1sIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWxcbiAqL1xuZnVuY3Rpb24gZXNjYXBlSHRtbChodG1sKSB7XG4gIHJldHVybiBodG1sLnJlcGxhY2UoUkVHRVhQX0xULCBcIiZsdDtcIikucmVwbGFjZShSRUdFWFBfR1QsIFwiJmd0O1wiKTtcbn1cblxuLyoqXG4gKiBkZWZhdWx0IHNhZmVBdHRyVmFsdWUgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGFnXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gY3NzRmlsdGVyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHNhZmVBdHRyVmFsdWUodGFnLCBuYW1lLCB2YWx1ZSwgY3NzRmlsdGVyKSB7XG4gIC8vIHVuZXNjYXBlIGF0dHJpYnV0ZSB2YWx1ZSBmaXJzdGx5XG4gIHZhbHVlID0gZnJpZW5kbHlBdHRyVmFsdWUodmFsdWUpO1xuXG4gIGlmIChuYW1lID09PSBcImhyZWZcIiB8fCBuYW1lID09PSBcInNyY1wiKSB7XG4gICAgLy8gZmlsdGVyIGBocmVmYCBhbmQgYHNyY2AgYXR0cmlidXRlXG4gICAgLy8gb25seSBhbGxvdyB0aGUgdmFsdWUgdGhhdCBzdGFydHMgd2l0aCBgaHR0cDovL2AgfCBgaHR0cHM6Ly9gIHwgYG1haWx0bzpgIHwgYC9gIHwgYCNgXG4gICAgdmFsdWUgPSBfLnRyaW0odmFsdWUpO1xuICAgIGlmICh2YWx1ZSA9PT0gXCIjXCIpIHJldHVybiBcIiNcIjtcbiAgICBpZiAoXG4gICAgICAhKFxuICAgICAgICB2YWx1ZS5zdWJzdHIoMCwgNykgPT09IFwiaHR0cDovL1wiIHx8XG4gICAgICAgIHZhbHVlLnN1YnN0cigwLCA4KSA9PT0gXCJodHRwczovL1wiIHx8XG4gICAgICAgIHZhbHVlLnN1YnN0cigwLCA3KSA9PT0gXCJtYWlsdG86XCIgfHxcbiAgICAgICAgdmFsdWUuc3Vic3RyKDAsIDQpID09PSBcInRlbDpcIiB8fFxuICAgICAgICB2YWx1ZS5zdWJzdHIoMCwgMTEpID09PSBcImRhdGE6aW1hZ2UvXCIgfHxcbiAgICAgICAgdmFsdWUuc3Vic3RyKDAsIDYpID09PSBcImZ0cDovL1wiIHx8XG4gICAgICAgIHZhbHVlLnN1YnN0cigwLCAyKSA9PT0gXCIuL1wiIHx8XG4gICAgICAgIHZhbHVlLnN1YnN0cigwLCAzKSA9PT0gXCIuLi9cIiB8fFxuICAgICAgICB2YWx1ZVswXSA9PT0gXCIjXCIgfHxcbiAgICAgICAgdmFsdWVbMF0gPT09IFwiL1wiXG4gICAgICApXG4gICAgKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gIH0gZWxzZSBpZiAobmFtZSA9PT0gXCJiYWNrZ3JvdW5kXCIpIHtcbiAgICAvLyBmaWx0ZXIgYGJhY2tncm91bmRgIGF0dHJpYnV0ZSAobWF5YmUgbm8gdXNlKVxuICAgIC8vIGBqYXZhc2NyaXB0OmBcbiAgICBSRUdFWFBfREVGQVVMVF9PTl9UQUdfQVRUUl80Lmxhc3RJbmRleCA9IDA7XG4gICAgaWYgKFJFR0VYUF9ERUZBVUxUX09OX1RBR19BVFRSXzQudGVzdCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfSBlbHNlIGlmIChuYW1lID09PSBcInN0eWxlXCIpIHtcbiAgICAvLyBgZXhwcmVzc2lvbigpYFxuICAgIFJFR0VYUF9ERUZBVUxUX09OX1RBR19BVFRSXzcubGFzdEluZGV4ID0gMDtcbiAgICBpZiAoUkVHRVhQX0RFRkFVTFRfT05fVEFHX0FUVFJfNy50ZXN0KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIC8vIGB1cmwoKWBcbiAgICBSRUdFWFBfREVGQVVMVF9PTl9UQUdfQVRUUl84Lmxhc3RJbmRleCA9IDA7XG4gICAgaWYgKFJFR0VYUF9ERUZBVUxUX09OX1RBR19BVFRSXzgudGVzdCh2YWx1ZSkpIHtcbiAgICAgIFJFR0VYUF9ERUZBVUxUX09OX1RBR19BVFRSXzQubGFzdEluZGV4ID0gMDtcbiAgICAgIGlmIChSRUdFWFBfREVGQVVMVF9PTl9UQUdfQVRUUl80LnRlc3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY3NzRmlsdGVyICE9PSBmYWxzZSkge1xuICAgICAgY3NzRmlsdGVyID0gY3NzRmlsdGVyIHx8IGRlZmF1bHRDU1NGaWx0ZXI7XG4gICAgICB2YWx1ZSA9IGNzc0ZpbHRlci5wcm9jZXNzKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2NhcGUgYDw+XCJgIGJlZm9yZSByZXR1cm5zXG4gIHZhbHVlID0gZXNjYXBlQXR0clZhbHVlKHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG4vLyBSZWdFeHAgbGlzdFxudmFyIFJFR0VYUF9MVCA9IC88L2c7XG52YXIgUkVHRVhQX0dUID0gLz4vZztcbnZhciBSRUdFWFBfUVVPVEUgPSAvXCIvZztcbnZhciBSRUdFWFBfUVVPVEVfMiA9IC8mcXVvdDsvZztcbnZhciBSRUdFWFBfQVRUUl9WQUxVRV8xID0gLyYjKFthLXpBLVowLTldKik7Py9naW07XG52YXIgUkVHRVhQX0FUVFJfVkFMVUVfQ09MT04gPSAvJmNvbG9uOz8vZ2ltO1xudmFyIFJFR0VYUF9BVFRSX1ZBTFVFX05FV0xJTkUgPSAvJm5ld2xpbmU7Py9naW07XG4vLyB2YXIgUkVHRVhQX0RFRkFVTFRfT05fVEFHX0FUVFJfMyA9IC9cXC9cXCp8XFwqXFwvL2dtO1xudmFyIFJFR0VYUF9ERUZBVUxUX09OX1RBR19BVFRSXzQgPVxuICAvKChqXFxzKmFcXHMqdlxccyphfHZcXHMqYnxsXFxzKmlcXHMqdlxccyplKVxccypzXFxzKmNcXHMqclxccyppXFxzKnBcXHMqdFxccyp8bVxccypvXFxzKmNcXHMqaFxccyphKTovZ2k7XG4vLyB2YXIgUkVHRVhQX0RFRkFVTFRfT05fVEFHX0FUVFJfNSA9IC9eW1xcc1wiJ2BdKihkXFxzKmFcXHMqdFxccyphXFxzKilcXDovZ2k7XG4vLyB2YXIgUkVHRVhQX0RFRkFVTFRfT05fVEFHX0FUVFJfNiA9IC9eW1xcc1wiJ2BdKihkXFxzKmFcXHMqdFxccyphXFxzKilcXDpcXHMqaW1hZ2VcXC8vZ2k7XG52YXIgUkVHRVhQX0RFRkFVTFRfT05fVEFHX0FUVFJfNyA9XG4gIC9lXFxzKnhcXHMqcFxccypyXFxzKmVcXHMqc1xccypzXFxzKmlcXHMqb1xccypuXFxzKlxcKC4qL2dpO1xudmFyIFJFR0VYUF9ERUZBVUxUX09OX1RBR19BVFRSXzggPSAvdVxccypyXFxzKmxcXHMqXFwoLiovZ2k7XG5cbi8qKlxuICogZXNjYXBlIGRvdWJsZSBxdW90ZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ30gc3RyXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZVF1b3RlKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoUkVHRVhQX1FVT1RFLCBcIiZxdW90O1wiKTtcbn1cblxuLyoqXG4gKiB1bmVzY2FwZSBkb3VibGUgcXVvdGVcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHN0clxuICovXG5mdW5jdGlvbiB1bmVzY2FwZVF1b3RlKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoUkVHRVhQX1FVT1RFXzIsICdcIicpO1xufVxuXG4vKipcbiAqIGVzY2FwZSBodG1sIGVudGl0aWVzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBlc2NhcGVIdG1sRW50aXRpZXMoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShSRUdFWFBfQVRUUl9WQUxVRV8xLCBmdW5jdGlvbiByZXBsYWNlVW5pY29kZShzdHIsIGNvZGUpIHtcbiAgICByZXR1cm4gY29kZVswXSA9PT0gXCJ4XCIgfHwgY29kZVswXSA9PT0gXCJYXCJcbiAgICAgID8gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChjb2RlLnN1YnN0cigxKSwgMTYpKVxuICAgICAgOiBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGNvZGUsIDEwKSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIGVzY2FwZSBodG1sNSBuZXcgZGFuZ2VyIGVudGl0aWVzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBlc2NhcGVEYW5nZXJIdG1sNUVudGl0aWVzKHN0cikge1xuICByZXR1cm4gc3RyXG4gICAgLnJlcGxhY2UoUkVHRVhQX0FUVFJfVkFMVUVfQ09MT04sIFwiOlwiKVxuICAgIC5yZXBsYWNlKFJFR0VYUF9BVFRSX1ZBTFVFX05FV0xJTkUsIFwiIFwiKTtcbn1cblxuLyoqXG4gKiBjbGVhciBub25wcmludGFibGUgY2hhcmFjdGVyc1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gY2xlYXJOb25QcmludGFibGVDaGFyYWN0ZXIoc3RyKSB7XG4gIHZhciBzdHIyID0gXCJcIjtcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHN0ci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHN0cjIgKz0gc3RyLmNoYXJDb2RlQXQoaSkgPCAzMiA/IFwiIFwiIDogc3RyLmNoYXJBdChpKTtcbiAgfVxuICByZXR1cm4gXy50cmltKHN0cjIpO1xufVxuXG4vKipcbiAqIGdldCBmcmllbmRseSBhdHRyaWJ1dGUgdmFsdWVcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGZyaWVuZGx5QXR0clZhbHVlKHN0cikge1xuICBzdHIgPSB1bmVzY2FwZVF1b3RlKHN0cik7XG4gIHN0ciA9IGVzY2FwZUh0bWxFbnRpdGllcyhzdHIpO1xuICBzdHIgPSBlc2NhcGVEYW5nZXJIdG1sNUVudGl0aWVzKHN0cik7XG4gIHN0ciA9IGNsZWFyTm9uUHJpbnRhYmxlQ2hhcmFjdGVyKHN0cik7XG4gIHJldHVybiBzdHI7XG59XG5cbi8qKlxuICogdW5lc2NhcGUgYXR0cmlidXRlIHZhbHVlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBlc2NhcGVBdHRyVmFsdWUoc3RyKSB7XG4gIHN0ciA9IGVzY2FwZVF1b3RlKHN0cik7XG4gIHN0ciA9IGVzY2FwZUh0bWwoc3RyKTtcbiAgcmV0dXJuIHN0cjtcbn1cblxuLyoqXG4gKiBgb25JZ25vcmVUYWdgIGZ1bmN0aW9uIGZvciByZW1vdmluZyBhbGwgdGhlIHRhZ3MgdGhhdCBhcmUgbm90IGluIHdoaXRlbGlzdFxuICovXG5mdW5jdGlvbiBvbklnbm9yZVRhZ1N0cmlwQWxsKCkge1xuICByZXR1cm4gXCJcIjtcbn1cblxuLyoqXG4gKiByZW1vdmUgdGFnIGJvZHlcbiAqIHNwZWNpZnkgYSBgdGFnc2AgbGlzdCwgaWYgdGhlIHRhZyBpcyBub3QgaW4gdGhlIGB0YWdzYCBsaXN0IHRoZW4gcHJvY2VzcyBieSB0aGUgc3BlY2lmeSBmdW5jdGlvbiAob3B0aW9uYWwpXG4gKlxuICogQHBhcmFtIHthcnJheX0gdGFnc1xuICogQHBhcmFtIHtmdW5jdGlvbn0gbmV4dFxuICovXG5mdW5jdGlvbiBTdHJpcFRhZ0JvZHkodGFncywgbmV4dCkge1xuICBpZiAodHlwZW9mIG5leHQgIT09IFwiZnVuY3Rpb25cIikge1xuICAgIG5leHQgPSBmdW5jdGlvbiAoKSB7fTtcbiAgfVxuXG4gIHZhciBpc1JlbW92ZUFsbFRhZyA9ICFBcnJheS5pc0FycmF5KHRhZ3MpO1xuICBmdW5jdGlvbiBpc1JlbW92ZVRhZyh0YWcpIHtcbiAgICBpZiAoaXNSZW1vdmVBbGxUYWcpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBfLmluZGV4T2YodGFncywgdGFnKSAhPT0gLTE7XG4gIH1cblxuICB2YXIgcmVtb3ZlTGlzdCA9IFtdO1xuICB2YXIgcG9zU3RhcnQgPSBmYWxzZTtcblxuICByZXR1cm4ge1xuICAgIG9uSWdub3JlVGFnOiBmdW5jdGlvbiAodGFnLCBodG1sLCBvcHRpb25zKSB7XG4gICAgICBpZiAoaXNSZW1vdmVUYWcodGFnKSkge1xuICAgICAgICBpZiAob3B0aW9ucy5pc0Nsb3NpbmcpIHtcbiAgICAgICAgICB2YXIgcmV0ID0gXCJbL3JlbW92ZWRdXCI7XG4gICAgICAgICAgdmFyIGVuZCA9IG9wdGlvbnMucG9zaXRpb24gKyByZXQubGVuZ3RoO1xuICAgICAgICAgIHJlbW92ZUxpc3QucHVzaChbXG4gICAgICAgICAgICBwb3NTdGFydCAhPT0gZmFsc2UgPyBwb3NTdGFydCA6IG9wdGlvbnMucG9zaXRpb24sXG4gICAgICAgICAgICBlbmQsXG4gICAgICAgICAgXSk7XG4gICAgICAgICAgcG9zU3RhcnQgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghcG9zU3RhcnQpIHtcbiAgICAgICAgICAgIHBvc1N0YXJ0ID0gb3B0aW9ucy5wb3NpdGlvbjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFwiW3JlbW92ZWRdXCI7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXh0KHRhZywgaHRtbCwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIChodG1sKSB7XG4gICAgICB2YXIgcmV0aHRtbCA9IFwiXCI7XG4gICAgICB2YXIgbGFzdFBvcyA9IDA7XG4gICAgICBfLmZvckVhY2gocmVtb3ZlTGlzdCwgZnVuY3Rpb24gKHBvcykge1xuICAgICAgICByZXRodG1sICs9IGh0bWwuc2xpY2UobGFzdFBvcywgcG9zWzBdKTtcbiAgICAgICAgbGFzdFBvcyA9IHBvc1sxXTtcbiAgICAgIH0pO1xuICAgICAgcmV0aHRtbCArPSBodG1sLnNsaWNlKGxhc3RQb3MpO1xuICAgICAgcmV0dXJuIHJldGh0bWw7XG4gICAgfSxcbiAgfTtcbn1cblxuLyoqXG4gKiByZW1vdmUgaHRtbCBjb21tZW50c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBodG1sXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHN0cmlwQ29tbWVudFRhZyhodG1sKSB7XG4gIHZhciByZXRIdG1sID0gXCJcIjtcbiAgdmFyIGxhc3RQb3MgPSAwO1xuICB3aGlsZSAobGFzdFBvcyA8IGh0bWwubGVuZ3RoKSB7XG4gICAgdmFyIGkgPSBodG1sLmluZGV4T2YoXCI8IS0tXCIsIGxhc3RQb3MpO1xuICAgIGlmIChpID09PSAtMSkge1xuICAgICAgcmV0SHRtbCArPSBodG1sLnNsaWNlKGxhc3RQb3MpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldEh0bWwgKz0gaHRtbC5zbGljZShsYXN0UG9zLCBpKTtcbiAgICB2YXIgaiA9IGh0bWwuaW5kZXhPZihcIi0tPlwiLCBpKTtcbiAgICBpZiAoaiA9PT0gLTEpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBsYXN0UG9zID0gaiArIDM7XG4gIH1cbiAgcmV0dXJuIHJldEh0bWw7XG59XG5cbi8qKlxuICogcmVtb3ZlIGludmlzaWJsZSBjaGFyYWN0ZXJzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gc3RyaXBCbGFua0NoYXIoaHRtbCkge1xuICB2YXIgY2hhcnMgPSBodG1sLnNwbGl0KFwiXCIpO1xuICBjaGFycyA9IGNoYXJzLmZpbHRlcihmdW5jdGlvbiAoY2hhcikge1xuICAgIHZhciBjID0gY2hhci5jaGFyQ29kZUF0KDApO1xuICAgIGlmIChjID09PSAxMjcpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoYyA8PSAzMSkge1xuICAgICAgaWYgKGMgPT09IDEwIHx8IGMgPT09IDEzKSByZXR1cm4gdHJ1ZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0pO1xuICByZXR1cm4gY2hhcnMuam9pbihcIlwiKTtcbn1cblxuZXhwb3J0cy53aGl0ZUxpc3QgPSBnZXREZWZhdWx0V2hpdGVMaXN0KCk7XG5leHBvcnRzLmdldERlZmF1bHRXaGl0ZUxpc3QgPSBnZXREZWZhdWx0V2hpdGVMaXN0O1xuZXhwb3J0cy5vblRhZyA9IG9uVGFnO1xuZXhwb3J0cy5vbklnbm9yZVRhZyA9IG9uSWdub3JlVGFnO1xuZXhwb3J0cy5vblRhZ0F0dHIgPSBvblRhZ0F0dHI7XG5leHBvcnRzLm9uSWdub3JlVGFnQXR0ciA9IG9uSWdub3JlVGFnQXR0cjtcbmV4cG9ydHMuc2FmZUF0dHJWYWx1ZSA9IHNhZmVBdHRyVmFsdWU7XG5leHBvcnRzLmVzY2FwZUh0bWwgPSBlc2NhcGVIdG1sO1xuZXhwb3J0cy5lc2NhcGVRdW90ZSA9IGVzY2FwZVF1b3RlO1xuZXhwb3J0cy51bmVzY2FwZVF1b3RlID0gdW5lc2NhcGVRdW90ZTtcbmV4cG9ydHMuZXNjYXBlSHRtbEVudGl0aWVzID0gZXNjYXBlSHRtbEVudGl0aWVzO1xuZXhwb3J0cy5lc2NhcGVEYW5nZXJIdG1sNUVudGl0aWVzID0gZXNjYXBlRGFuZ2VySHRtbDVFbnRpdGllcztcbmV4cG9ydHMuY2xlYXJOb25QcmludGFibGVDaGFyYWN0ZXIgPSBjbGVhck5vblByaW50YWJsZUNoYXJhY3RlcjtcbmV4cG9ydHMuZnJpZW5kbHlBdHRyVmFsdWUgPSBmcmllbmRseUF0dHJWYWx1ZTtcbmV4cG9ydHMuZXNjYXBlQXR0clZhbHVlID0gZXNjYXBlQXR0clZhbHVlO1xuZXhwb3J0cy5vbklnbm9yZVRhZ1N0cmlwQWxsID0gb25JZ25vcmVUYWdTdHJpcEFsbDtcbmV4cG9ydHMuU3RyaXBUYWdCb2R5ID0gU3RyaXBUYWdCb2R5O1xuZXhwb3J0cy5zdHJpcENvbW1lbnRUYWcgPSBzdHJpcENvbW1lbnRUYWc7XG5leHBvcnRzLnN0cmlwQmxhbmtDaGFyID0gc3RyaXBCbGFua0NoYXI7XG5leHBvcnRzLmNzc0ZpbHRlciA9IGRlZmF1bHRDU1NGaWx0ZXI7XG5leHBvcnRzLmdldERlZmF1bHRDU1NXaGl0ZUxpc3QgPSBnZXREZWZhdWx0Q1NTV2hpdGVMaXN0O1xuIiwiLyoqXG4gKiB4c3NcbiAqXG4gKiBAYXV0aG9yIFpvbmdtaW4gTGVpPGxlaXpvbmdtaW5AZ21haWwuY29tPlxuICovXG5cbnZhciBERUZBVUxUID0gcmVxdWlyZShcIi4vZGVmYXVsdFwiKTtcbnZhciBwYXJzZXIgPSByZXF1aXJlKFwiLi9wYXJzZXJcIik7XG52YXIgRmlsdGVyWFNTID0gcmVxdWlyZShcIi4veHNzXCIpO1xuXG4vKipcbiAqIGZpbHRlciB4c3MgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgeyB3aGl0ZUxpc3QsIG9uVGFnLCBvblRhZ0F0dHIsIG9uSWdub3JlVGFnLCBvbklnbm9yZVRhZ0F0dHIsIHNhZmVBdHRyVmFsdWUsIGVzY2FwZUh0bWwgfVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBmaWx0ZXJYU1MoaHRtbCwgb3B0aW9ucykge1xuICB2YXIgeHNzID0gbmV3IEZpbHRlclhTUyhvcHRpb25zKTtcbiAgcmV0dXJuIHhzcy5wcm9jZXNzKGh0bWwpO1xufVxuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmaWx0ZXJYU1M7XG5leHBvcnRzLmZpbHRlclhTUyA9IGZpbHRlclhTUztcbmV4cG9ydHMuRmlsdGVyWFNTID0gRmlsdGVyWFNTO1xuXG4oZnVuY3Rpb24gKCkge1xuICBmb3IgKHZhciBpIGluIERFRkFVTFQpIHtcbiAgICBleHBvcnRzW2ldID0gREVGQVVMVFtpXTtcbiAgfVxuICBmb3IgKHZhciBqIGluIHBhcnNlcikge1xuICAgIGV4cG9ydHNbal0gPSBwYXJzZXJbal07XG4gIH1cbn0pKCk7XG5cbi8vIHVzaW5nIGB4c3NgIG9uIHRoZSBicm93c2VyLCBvdXRwdXQgYGZpbHRlclhTU2AgdG8gdGhlIGdsb2JhbHNcbmlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIHdpbmRvdy5maWx0ZXJYU1MgPSBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gdXNpbmcgYHhzc2Agb24gdGhlIFdlYldvcmtlciwgb3V0cHV0IGBmaWx0ZXJYU1NgIHRvIHRoZSBnbG9iYWxzXG5mdW5jdGlvbiBpc1dvcmtlckVudigpIHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHNlbGYgaW5zdGFuY2VvZiBEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZVxuICApO1xufVxuaWYgKGlzV29ya2VyRW52KCkpIHtcbiAgc2VsZi5maWx0ZXJYU1MgPSBtb2R1bGUuZXhwb3J0cztcbn1cbiIsIi8qKlxuICogU2ltcGxlIEhUTUwgUGFyc2VyXG4gKlxuICogQGF1dGhvciBab25nbWluIExlaTxsZWl6b25nbWluQGdtYWlsLmNvbT5cbiAqL1xuXG52YXIgXyA9IHJlcXVpcmUoXCIuL3V0aWxcIik7XG5cbi8qKlxuICogZ2V0IHRhZyBuYW1lXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWwgZS5nLiAnPGEgaGVmPVwiI1wiPidcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0VGFnTmFtZShodG1sKSB7XG4gIHZhciBpID0gXy5zcGFjZUluZGV4KGh0bWwpO1xuICB2YXIgdGFnTmFtZTtcbiAgaWYgKGkgPT09IC0xKSB7XG4gICAgdGFnTmFtZSA9IGh0bWwuc2xpY2UoMSwgLTEpO1xuICB9IGVsc2Uge1xuICAgIHRhZ05hbWUgPSBodG1sLnNsaWNlKDEsIGkgKyAxKTtcbiAgfVxuICB0YWdOYW1lID0gXy50cmltKHRhZ05hbWUpLnRvTG93ZXJDYXNlKCk7XG4gIGlmICh0YWdOYW1lLnNsaWNlKDAsIDEpID09PSBcIi9cIikgdGFnTmFtZSA9IHRhZ05hbWUuc2xpY2UoMSk7XG4gIGlmICh0YWdOYW1lLnNsaWNlKC0xKSA9PT0gXCIvXCIpIHRhZ05hbWUgPSB0YWdOYW1lLnNsaWNlKDAsIC0xKTtcbiAgcmV0dXJuIHRhZ05hbWU7XG59XG5cbi8qKlxuICogaXMgY2xvc2UgdGFnP1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBodG1sIOWmgu+8mic8YSBoZWY9XCIjXCI+J1xuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNDbG9zaW5nKGh0bWwpIHtcbiAgcmV0dXJuIGh0bWwuc2xpY2UoMCwgMikgPT09IFwiPC9cIjtcbn1cblxuLyoqXG4gKiBwYXJzZSBpbnB1dCBodG1sIGFuZCByZXR1cm5zIHByb2Nlc3NlZCBodG1sXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9uVGFnIGUuZy4gZnVuY3Rpb24gKHNvdXJjZVBvc2l0aW9uLCBwb3NpdGlvbiwgdGFnLCBodG1sLCBpc0Nsb3NpbmcpXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlc2NhcGVIdG1sXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHBhcnNlVGFnKGh0bWwsIG9uVGFnLCBlc2NhcGVIdG1sKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciByZXRodG1sID0gXCJcIjtcbiAgdmFyIGxhc3RQb3MgPSAwO1xuICB2YXIgdGFnU3RhcnQgPSBmYWxzZTtcbiAgdmFyIHF1b3RlU3RhcnQgPSBmYWxzZTtcbiAgdmFyIGN1cnJlbnRQb3MgPSAwO1xuICB2YXIgbGVuID0gaHRtbC5sZW5ndGg7XG4gIHZhciBjdXJyZW50VGFnTmFtZSA9IFwiXCI7XG4gIHZhciBjdXJyZW50SHRtbCA9IFwiXCI7XG5cbiAgY2hhcml0ZXJhdG9yOiBmb3IgKGN1cnJlbnRQb3MgPSAwOyBjdXJyZW50UG9zIDwgbGVuOyBjdXJyZW50UG9zKyspIHtcbiAgICB2YXIgYyA9IGh0bWwuY2hhckF0KGN1cnJlbnRQb3MpO1xuICAgIGlmICh0YWdTdGFydCA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChjID09PSBcIjxcIikge1xuICAgICAgICB0YWdTdGFydCA9IGN1cnJlbnRQb3M7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocXVvdGVTdGFydCA9PT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGMgPT09IFwiPFwiKSB7XG4gICAgICAgICAgcmV0aHRtbCArPSBlc2NhcGVIdG1sKGh0bWwuc2xpY2UobGFzdFBvcywgY3VycmVudFBvcykpO1xuICAgICAgICAgIHRhZ1N0YXJ0ID0gY3VycmVudFBvcztcbiAgICAgICAgICBsYXN0UG9zID0gY3VycmVudFBvcztcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYyA9PT0gXCI+XCIgfHwgY3VycmVudFBvcyA9PT0gbGVuIC0gMSkge1xuICAgICAgICAgIHJldGh0bWwgKz0gZXNjYXBlSHRtbChodG1sLnNsaWNlKGxhc3RQb3MsIHRhZ1N0YXJ0KSk7XG4gICAgICAgICAgY3VycmVudEh0bWwgPSBodG1sLnNsaWNlKHRhZ1N0YXJ0LCBjdXJyZW50UG9zICsgMSk7XG4gICAgICAgICAgY3VycmVudFRhZ05hbWUgPSBnZXRUYWdOYW1lKGN1cnJlbnRIdG1sKTtcbiAgICAgICAgICByZXRodG1sICs9IG9uVGFnKFxuICAgICAgICAgICAgdGFnU3RhcnQsXG4gICAgICAgICAgICByZXRodG1sLmxlbmd0aCxcbiAgICAgICAgICAgIGN1cnJlbnRUYWdOYW1lLFxuICAgICAgICAgICAgY3VycmVudEh0bWwsXG4gICAgICAgICAgICBpc0Nsb3NpbmcoY3VycmVudEh0bWwpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBsYXN0UG9zID0gY3VycmVudFBvcyArIDE7XG4gICAgICAgICAgdGFnU3RhcnQgPSBmYWxzZTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYyA9PT0gJ1wiJyB8fCBjID09PSBcIidcIikge1xuICAgICAgICAgIHZhciBpID0gMTtcbiAgICAgICAgICB2YXIgaWMgPSBodG1sLmNoYXJBdChjdXJyZW50UG9zIC0gaSk7XG5cbiAgICAgICAgICB3aGlsZSAoaWMudHJpbSgpID09PSBcIlwiIHx8IGljID09PSBcIj1cIikge1xuICAgICAgICAgICAgaWYgKGljID09PSBcIj1cIikge1xuICAgICAgICAgICAgICBxdW90ZVN0YXJ0ID0gYztcbiAgICAgICAgICAgICAgY29udGludWUgY2hhcml0ZXJhdG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWMgPSBodG1sLmNoYXJBdChjdXJyZW50UG9zIC0gKytpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjID09PSBxdW90ZVN0YXJ0KSB7XG4gICAgICAgICAgcXVvdGVTdGFydCA9IGZhbHNlO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChsYXN0UG9zIDwgbGVuKSB7XG4gICAgcmV0aHRtbCArPSBlc2NhcGVIdG1sKGh0bWwuc3Vic3RyKGxhc3RQb3MpKTtcbiAgfVxuXG4gIHJldHVybiByZXRodG1sO1xufVxuXG52YXIgUkVHRVhQX0lMTEVHQUxfQVRUUl9OQU1FID0gL1teYS16QS1aMC05XFxcXF86Li1dL2dpbTtcblxuLyoqXG4gKiBwYXJzZSBpbnB1dCBhdHRyaWJ1dGVzIGFuZCByZXR1cm5zIHByb2Nlc3NlZCBhdHRyaWJ1dGVzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWwgZS5nLiBgaHJlZj1cIiNcIiB0YXJnZXQ9XCJfYmxhbmtcImBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9uQXR0ciBlLmcuIGBmdW5jdGlvbiAobmFtZSwgdmFsdWUpYFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBwYXJzZUF0dHIoaHRtbCwgb25BdHRyKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBsYXN0UG9zID0gMDtcbiAgdmFyIGxhc3RNYXJrUG9zID0gMDtcbiAgdmFyIHJldEF0dHJzID0gW107XG4gIHZhciB0bXBOYW1lID0gZmFsc2U7XG4gIHZhciBsZW4gPSBodG1sLmxlbmd0aDtcblxuICBmdW5jdGlvbiBhZGRBdHRyKG5hbWUsIHZhbHVlKSB7XG4gICAgbmFtZSA9IF8udHJpbShuYW1lKTtcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKFJFR0VYUF9JTExFR0FMX0FUVFJfTkFNRSwgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAobmFtZS5sZW5ndGggPCAxKSByZXR1cm47XG4gICAgdmFyIHJldCA9IG9uQXR0cihuYW1lLCB2YWx1ZSB8fCBcIlwiKTtcbiAgICBpZiAocmV0KSByZXRBdHRycy5wdXNoKHJldCk7XG4gIH1cblxuICAvLyDpgJDkuKrliIbmnpDlrZfnrKZcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBjID0gaHRtbC5jaGFyQXQoaSk7XG4gICAgdmFyIHYsIGo7XG4gICAgaWYgKHRtcE5hbWUgPT09IGZhbHNlICYmIGMgPT09IFwiPVwiKSB7XG4gICAgICB0bXBOYW1lID0gaHRtbC5zbGljZShsYXN0UG9zLCBpKTtcbiAgICAgIGxhc3RQb3MgPSBpICsgMTtcbiAgICAgIGxhc3RNYXJrUG9zID0gaHRtbC5jaGFyQXQobGFzdFBvcykgPT09ICdcIicgfHwgaHRtbC5jaGFyQXQobGFzdFBvcykgPT09IFwiJ1wiID8gbGFzdFBvcyA6IGZpbmROZXh0UXVvdGF0aW9uTWFyayhodG1sLCBpICsgMSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKHRtcE5hbWUgIT09IGZhbHNlKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGkgPT09IGxhc3RNYXJrUG9zXG4gICAgICApIHtcbiAgICAgICAgaiA9IGh0bWwuaW5kZXhPZihjLCBpICsgMSk7XG4gICAgICAgIGlmIChqID09PSAtMSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHYgPSBfLnRyaW0oaHRtbC5zbGljZShsYXN0TWFya1BvcyArIDEsIGopKTtcbiAgICAgICAgICBhZGRBdHRyKHRtcE5hbWUsIHYpO1xuICAgICAgICAgIHRtcE5hbWUgPSBmYWxzZTtcbiAgICAgICAgICBpID0gajtcbiAgICAgICAgICBsYXN0UG9zID0gaSArIDE7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKC9cXHN8XFxufFxcdC8udGVzdChjKSkge1xuICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvXFxzfFxcbnxcXHQvZywgXCIgXCIpO1xuICAgICAgaWYgKHRtcE5hbWUgPT09IGZhbHNlKSB7XG4gICAgICAgIGogPSBmaW5kTmV4dEVxdWFsKGh0bWwsIGkpO1xuICAgICAgICBpZiAoaiA9PT0gLTEpIHtcbiAgICAgICAgICB2ID0gXy50cmltKGh0bWwuc2xpY2UobGFzdFBvcywgaSkpO1xuICAgICAgICAgIGFkZEF0dHIodik7XG4gICAgICAgICAgdG1wTmFtZSA9IGZhbHNlO1xuICAgICAgICAgIGxhc3RQb3MgPSBpICsgMTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpID0gaiAtIDE7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGogPSBmaW5kQmVmb3JlRXF1YWwoaHRtbCwgaSAtIDEpO1xuICAgICAgICBpZiAoaiA9PT0gLTEpIHtcbiAgICAgICAgICB2ID0gXy50cmltKGh0bWwuc2xpY2UobGFzdFBvcywgaSkpO1xuICAgICAgICAgIHYgPSBzdHJpcFF1b3RlV3JhcCh2KTtcbiAgICAgICAgICBhZGRBdHRyKHRtcE5hbWUsIHYpO1xuICAgICAgICAgIHRtcE5hbWUgPSBmYWxzZTtcbiAgICAgICAgICBsYXN0UG9zID0gaSArIDE7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAobGFzdFBvcyA8IGh0bWwubGVuZ3RoKSB7XG4gICAgaWYgKHRtcE5hbWUgPT09IGZhbHNlKSB7XG4gICAgICBhZGRBdHRyKGh0bWwuc2xpY2UobGFzdFBvcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZGRBdHRyKHRtcE5hbWUsIHN0cmlwUXVvdGVXcmFwKF8udHJpbShodG1sLnNsaWNlKGxhc3RQb3MpKSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBfLnRyaW0ocmV0QXR0cnMuam9pbihcIiBcIikpO1xufVxuXG5mdW5jdGlvbiBmaW5kTmV4dEVxdWFsKHN0ciwgaSkge1xuICBmb3IgKDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIHZhciBjID0gc3RyW2ldO1xuICAgIGlmIChjID09PSBcIiBcIikgY29udGludWU7XG4gICAgaWYgKGMgPT09IFwiPVwiKSByZXR1cm4gaTtcbiAgICByZXR1cm4gLTE7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZE5leHRRdW90YXRpb25NYXJrKHN0ciwgaSkge1xuICBmb3IgKDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIHZhciBjID0gc3RyW2ldO1xuICAgIGlmIChjID09PSBcIiBcIikgY29udGludWU7XG4gICAgaWYgKGMgPT09IFwiJ1wiIHx8IGMgPT09ICdcIicpIHJldHVybiBpO1xuICAgIHJldHVybiAtMTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kQmVmb3JlRXF1YWwoc3RyLCBpKSB7XG4gIGZvciAoOyBpID4gMDsgaS0tKSB7XG4gICAgdmFyIGMgPSBzdHJbaV07XG4gICAgaWYgKGMgPT09IFwiIFwiKSBjb250aW51ZTtcbiAgICBpZiAoYyA9PT0gXCI9XCIpIHJldHVybiBpO1xuICAgIHJldHVybiAtMTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1F1b3RlV3JhcFN0cmluZyh0ZXh0KSB7XG4gIGlmIChcbiAgICAodGV4dFswXSA9PT0gJ1wiJyAmJiB0ZXh0W3RleHQubGVuZ3RoIC0gMV0gPT09ICdcIicpIHx8XG4gICAgKHRleHRbMF0gPT09IFwiJ1wiICYmIHRleHRbdGV4dC5sZW5ndGggLSAxXSA9PT0gXCInXCIpXG4gICkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdHJpcFF1b3RlV3JhcCh0ZXh0KSB7XG4gIGlmIChpc1F1b3RlV3JhcFN0cmluZyh0ZXh0KSkge1xuICAgIHJldHVybiB0ZXh0LnN1YnN0cigxLCB0ZXh0Lmxlbmd0aCAtIDIpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG59XG5cbmV4cG9ydHMucGFyc2VUYWcgPSBwYXJzZVRhZztcbmV4cG9ydHMucGFyc2VBdHRyID0gcGFyc2VBdHRyO1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIGluZGV4T2Y6IGZ1bmN0aW9uIChhcnIsIGl0ZW0pIHtcbiAgICB2YXIgaSwgajtcbiAgICBpZiAoQXJyYXkucHJvdG90eXBlLmluZGV4T2YpIHtcbiAgICAgIHJldHVybiBhcnIuaW5kZXhPZihpdGVtKTtcbiAgICB9XG4gICAgZm9yIChpID0gMCwgaiA9IGFyci5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIGlmIChhcnJbaV0gPT09IGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfSxcbiAgZm9yRWFjaDogZnVuY3Rpb24gKGFyciwgZm4sIHNjb3BlKSB7XG4gICAgdmFyIGksIGo7XG4gICAgaWYgKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSB7XG4gICAgICByZXR1cm4gYXJyLmZvckVhY2goZm4sIHNjb3BlKTtcbiAgICB9XG4gICAgZm9yIChpID0gMCwgaiA9IGFyci5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIGZuLmNhbGwoc2NvcGUsIGFycltpXSwgaSwgYXJyKTtcbiAgICB9XG4gIH0sXG4gIHRyaW06IGZ1bmN0aW9uIChzdHIpIHtcbiAgICBpZiAoU3RyaW5nLnByb3RvdHlwZS50cmltKSB7XG4gICAgICByZXR1cm4gc3RyLnRyaW0oKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oXlxccyopfChcXHMqJCkvZywgXCJcIik7XG4gIH0sXG4gIHNwYWNlSW5kZXg6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICB2YXIgcmVnID0gL1xcc3xcXG58XFx0LztcbiAgICB2YXIgbWF0Y2ggPSByZWcuZXhlYyhzdHIpO1xuICAgIHJldHVybiBtYXRjaCA/IG1hdGNoLmluZGV4IDogLTE7XG4gIH0sXG59O1xuIiwiLyoqXG4gKiBmaWx0ZXIgeHNzXG4gKlxuICogQGF1dGhvciBab25nbWluIExlaTxsZWl6b25nbWluQGdtYWlsLmNvbT5cbiAqL1xuXG52YXIgRmlsdGVyQ1NTID0gcmVxdWlyZShcImNzc2ZpbHRlclwiKS5GaWx0ZXJDU1M7XG52YXIgREVGQVVMVCA9IHJlcXVpcmUoXCIuL2RlZmF1bHRcIik7XG52YXIgcGFyc2VyID0gcmVxdWlyZShcIi4vcGFyc2VyXCIpO1xudmFyIHBhcnNlVGFnID0gcGFyc2VyLnBhcnNlVGFnO1xudmFyIHBhcnNlQXR0ciA9IHBhcnNlci5wYXJzZUF0dHI7XG52YXIgXyA9IHJlcXVpcmUoXCIuL3V0aWxcIik7XG5cbi8qKlxuICogcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGlucHV0IHZhbHVlIGlzIGB1bmRlZmluZWRgIG9yIGBudWxsYFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzTnVsbChvYmopIHtcbiAgcmV0dXJuIG9iaiA9PT0gdW5kZWZpbmVkIHx8IG9iaiA9PT0gbnVsbDtcbn1cblxuLyoqXG4gKiBnZXQgYXR0cmlidXRlcyBmb3IgYSB0YWdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICogQHJldHVybiB7T2JqZWN0fVxuICogICAtIHtTdHJpbmd9IGh0bWxcbiAqICAgLSB7Qm9vbGVhbn0gY2xvc2luZ1xuICovXG5mdW5jdGlvbiBnZXRBdHRycyhodG1sKSB7XG4gIHZhciBpID0gXy5zcGFjZUluZGV4KGh0bWwpO1xuICBpZiAoaSA9PT0gLTEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaHRtbDogXCJcIixcbiAgICAgIGNsb3Npbmc6IGh0bWxbaHRtbC5sZW5ndGggLSAyXSA9PT0gXCIvXCIsXG4gICAgfTtcbiAgfVxuICBodG1sID0gXy50cmltKGh0bWwuc2xpY2UoaSArIDEsIC0xKSk7XG4gIHZhciBpc0Nsb3NpbmcgPSBodG1sW2h0bWwubGVuZ3RoIC0gMV0gPT09IFwiL1wiO1xuICBpZiAoaXNDbG9zaW5nKSBodG1sID0gXy50cmltKGh0bWwuc2xpY2UoMCwgLTEpKTtcbiAgcmV0dXJuIHtcbiAgICBodG1sOiBodG1sLFxuICAgIGNsb3Npbmc6IGlzQ2xvc2luZyxcbiAgfTtcbn1cblxuLyoqXG4gKiBzaGFsbG93IGNvcHlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHNoYWxsb3dDb3B5T2JqZWN0KG9iaikge1xuICB2YXIgcmV0ID0ge307XG4gIGZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgcmV0W2ldID0gb2JqW2ldO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGtleXNUb0xvd2VyQ2FzZShvYmopIHtcbiAgdmFyIHJldCA9IHt9O1xuICBmb3IgKHZhciBpIGluIG9iaikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9ialtpXSkpIHtcbiAgICAgIHJldFtpLnRvTG93ZXJDYXNlKCldID0gb2JqW2ldLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS50b0xvd2VyQ2FzZSgpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldFtpLnRvTG93ZXJDYXNlKCldID0gb2JqW2ldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG4vKipcbiAqIEZpbHRlclhTUyBjbGFzc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiAgICAgICAgd2hpdGVMaXN0IChvciBhbGxvd0xpc3QpLCBvblRhZywgb25UYWdBdHRyLCBvbklnbm9yZVRhZyxcbiAqICAgICAgICBvbklnbm9yZVRhZ0F0dHIsIHNhZmVBdHRyVmFsdWUsIGVzY2FwZUh0bWxcbiAqICAgICAgICBzdHJpcElnbm9yZVRhZ0JvZHksIGFsbG93Q29tbWVudFRhZywgc3RyaXBCbGFua0NoYXJcbiAqICAgICAgICBjc3N7d2hpdGVMaXN0LCBvbkF0dHIsIG9uSWdub3JlQXR0cn0gYGNzcz1mYWxzZWAgbWVhbnMgZG9uJ3QgdXNlIGBjc3NmaWx0ZXJgXG4gKi9cbmZ1bmN0aW9uIEZpbHRlclhTUyhvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBzaGFsbG93Q29weU9iamVjdChvcHRpb25zIHx8IHt9KTtcblxuICBpZiAob3B0aW9ucy5zdHJpcElnbm9yZVRhZykge1xuICAgIGlmIChvcHRpb25zLm9uSWdub3JlVGFnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAnTm90ZXM6IGNhbm5vdCB1c2UgdGhlc2UgdHdvIG9wdGlvbnMgXCJzdHJpcElnbm9yZVRhZ1wiIGFuZCBcIm9uSWdub3JlVGFnXCIgYXQgdGhlIHNhbWUgdGltZSdcbiAgICAgICk7XG4gICAgfVxuICAgIG9wdGlvbnMub25JZ25vcmVUYWcgPSBERUZBVUxULm9uSWdub3JlVGFnU3RyaXBBbGw7XG4gIH1cbiAgaWYgKG9wdGlvbnMud2hpdGVMaXN0IHx8IG9wdGlvbnMuYWxsb3dMaXN0KSB7XG4gICAgb3B0aW9ucy53aGl0ZUxpc3QgPSBrZXlzVG9Mb3dlckNhc2Uob3B0aW9ucy53aGl0ZUxpc3QgfHwgb3B0aW9ucy5hbGxvd0xpc3QpO1xuICB9IGVsc2Uge1xuICAgIG9wdGlvbnMud2hpdGVMaXN0ID0gREVGQVVMVC53aGl0ZUxpc3Q7XG4gIH1cblxuICBvcHRpb25zLm9uVGFnID0gb3B0aW9ucy5vblRhZyB8fCBERUZBVUxULm9uVGFnO1xuICBvcHRpb25zLm9uVGFnQXR0ciA9IG9wdGlvbnMub25UYWdBdHRyIHx8IERFRkFVTFQub25UYWdBdHRyO1xuICBvcHRpb25zLm9uSWdub3JlVGFnID0gb3B0aW9ucy5vbklnbm9yZVRhZyB8fCBERUZBVUxULm9uSWdub3JlVGFnO1xuICBvcHRpb25zLm9uSWdub3JlVGFnQXR0ciA9IG9wdGlvbnMub25JZ25vcmVUYWdBdHRyIHx8IERFRkFVTFQub25JZ25vcmVUYWdBdHRyO1xuICBvcHRpb25zLnNhZmVBdHRyVmFsdWUgPSBvcHRpb25zLnNhZmVBdHRyVmFsdWUgfHwgREVGQVVMVC5zYWZlQXR0clZhbHVlO1xuICBvcHRpb25zLmVzY2FwZUh0bWwgPSBvcHRpb25zLmVzY2FwZUh0bWwgfHwgREVGQVVMVC5lc2NhcGVIdG1sO1xuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gIGlmIChvcHRpb25zLmNzcyA9PT0gZmFsc2UpIHtcbiAgICB0aGlzLmNzc0ZpbHRlciA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIG9wdGlvbnMuY3NzID0gb3B0aW9ucy5jc3MgfHwge307XG4gICAgdGhpcy5jc3NGaWx0ZXIgPSBuZXcgRmlsdGVyQ1NTKG9wdGlvbnMuY3NzKTtcbiAgfVxufVxuXG4vKipcbiAqIHN0YXJ0IHByb2Nlc3MgYW5kIHJldHVybnMgcmVzdWx0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuRmlsdGVyWFNTLnByb3RvdHlwZS5wcm9jZXNzID0gZnVuY3Rpb24gKGh0bWwpIHtcbiAgLy8gY29tcGF0aWJsZSB3aXRoIHRoZSBpbnB1dFxuICBodG1sID0gaHRtbCB8fCBcIlwiO1xuICBodG1sID0gaHRtbC50b1N0cmluZygpO1xuICBpZiAoIWh0bWwpIHJldHVybiBcIlwiO1xuXG4gIHZhciBtZSA9IHRoaXM7XG4gIHZhciBvcHRpb25zID0gbWUub3B0aW9ucztcbiAgdmFyIHdoaXRlTGlzdCA9IG9wdGlvbnMud2hpdGVMaXN0O1xuICB2YXIgb25UYWcgPSBvcHRpb25zLm9uVGFnO1xuICB2YXIgb25JZ25vcmVUYWcgPSBvcHRpb25zLm9uSWdub3JlVGFnO1xuICB2YXIgb25UYWdBdHRyID0gb3B0aW9ucy5vblRhZ0F0dHI7XG4gIHZhciBvbklnbm9yZVRhZ0F0dHIgPSBvcHRpb25zLm9uSWdub3JlVGFnQXR0cjtcbiAgdmFyIHNhZmVBdHRyVmFsdWUgPSBvcHRpb25zLnNhZmVBdHRyVmFsdWU7XG4gIHZhciBlc2NhcGVIdG1sID0gb3B0aW9ucy5lc2NhcGVIdG1sO1xuICB2YXIgY3NzRmlsdGVyID0gbWUuY3NzRmlsdGVyO1xuXG4gIC8vIHJlbW92ZSBpbnZpc2libGUgY2hhcmFjdGVyc1xuICBpZiAob3B0aW9ucy5zdHJpcEJsYW5rQ2hhcikge1xuICAgIGh0bWwgPSBERUZBVUxULnN0cmlwQmxhbmtDaGFyKGh0bWwpO1xuICB9XG5cbiAgLy8gcmVtb3ZlIGh0bWwgY29tbWVudHNcbiAgaWYgKCFvcHRpb25zLmFsbG93Q29tbWVudFRhZykge1xuICAgIGh0bWwgPSBERUZBVUxULnN0cmlwQ29tbWVudFRhZyhodG1sKTtcbiAgfVxuXG4gIC8vIGlmIGVuYWJsZSBzdHJpcElnbm9yZVRhZ0JvZHlcbiAgdmFyIHN0cmlwSWdub3JlVGFnQm9keSA9IGZhbHNlO1xuICBpZiAob3B0aW9ucy5zdHJpcElnbm9yZVRhZ0JvZHkpIHtcbiAgICBzdHJpcElnbm9yZVRhZ0JvZHkgPSBERUZBVUxULlN0cmlwVGFnQm9keShcbiAgICAgIG9wdGlvbnMuc3RyaXBJZ25vcmVUYWdCb2R5LFxuICAgICAgb25JZ25vcmVUYWdcbiAgICApO1xuICAgIG9uSWdub3JlVGFnID0gc3RyaXBJZ25vcmVUYWdCb2R5Lm9uSWdub3JlVGFnO1xuICB9XG5cbiAgdmFyIHJldEh0bWwgPSBwYXJzZVRhZyhcbiAgICBodG1sLFxuICAgIGZ1bmN0aW9uIChzb3VyY2VQb3NpdGlvbiwgcG9zaXRpb24sIHRhZywgaHRtbCwgaXNDbG9zaW5nKSB7XG4gICAgICB2YXIgaW5mbyA9IHtcbiAgICAgICAgc291cmNlUG9zaXRpb246IHNvdXJjZVBvc2l0aW9uLFxuICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgIGlzQ2xvc2luZzogaXNDbG9zaW5nLFxuICAgICAgICBpc1doaXRlOiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwod2hpdGVMaXN0LCB0YWcpLFxuICAgICAgfTtcblxuICAgICAgLy8gY2FsbCBgb25UYWcoKWBcbiAgICAgIHZhciByZXQgPSBvblRhZyh0YWcsIGh0bWwsIGluZm8pO1xuICAgICAgaWYgKCFpc051bGwocmV0KSkgcmV0dXJuIHJldDtcblxuICAgICAgaWYgKGluZm8uaXNXaGl0ZSkge1xuICAgICAgICBpZiAoaW5mby5pc0Nsb3NpbmcpIHtcbiAgICAgICAgICByZXR1cm4gXCI8L1wiICsgdGFnICsgXCI+XCI7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYXR0cnMgPSBnZXRBdHRycyhodG1sKTtcbiAgICAgICAgdmFyIHdoaXRlQXR0ckxpc3QgPSB3aGl0ZUxpc3RbdGFnXTtcbiAgICAgICAgdmFyIGF0dHJzSHRtbCA9IHBhcnNlQXR0cihhdHRycy5odG1sLCBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAvLyBjYWxsIGBvblRhZ0F0dHIoKWBcbiAgICAgICAgICB2YXIgaXNXaGl0ZUF0dHIgPSBfLmluZGV4T2Yod2hpdGVBdHRyTGlzdCwgbmFtZSkgIT09IC0xO1xuICAgICAgICAgIHZhciByZXQgPSBvblRhZ0F0dHIodGFnLCBuYW1lLCB2YWx1ZSwgaXNXaGl0ZUF0dHIpO1xuICAgICAgICAgIGlmICghaXNOdWxsKHJldCkpIHJldHVybiByZXQ7XG5cbiAgICAgICAgICBpZiAoaXNXaGl0ZUF0dHIpIHtcbiAgICAgICAgICAgIC8vIGNhbGwgYHNhZmVBdHRyVmFsdWUoKWBcbiAgICAgICAgICAgIHZhbHVlID0gc2FmZUF0dHJWYWx1ZSh0YWcsIG5hbWUsIHZhbHVlLCBjc3NGaWx0ZXIpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBuYW1lICsgJz1cIicgKyB2YWx1ZSArICdcIic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gY2FsbCBgb25JZ25vcmVUYWdBdHRyKClgXG4gICAgICAgICAgICByZXQgPSBvbklnbm9yZVRhZ0F0dHIodGFnLCBuYW1lLCB2YWx1ZSwgaXNXaGl0ZUF0dHIpO1xuICAgICAgICAgICAgaWYgKCFpc051bGwocmV0KSkgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGJ1aWxkIG5ldyB0YWcgaHRtbFxuICAgICAgICBodG1sID0gXCI8XCIgKyB0YWc7XG4gICAgICAgIGlmIChhdHRyc0h0bWwpIGh0bWwgKz0gXCIgXCIgKyBhdHRyc0h0bWw7XG4gICAgICAgIGlmIChhdHRycy5jbG9zaW5nKSBodG1sICs9IFwiIC9cIjtcbiAgICAgICAgaHRtbCArPSBcIj5cIjtcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjYWxsIGBvbklnbm9yZVRhZygpYFxuICAgICAgICByZXQgPSBvbklnbm9yZVRhZyh0YWcsIGh0bWwsIGluZm8pO1xuICAgICAgICBpZiAoIWlzTnVsbChyZXQpKSByZXR1cm4gcmV0O1xuICAgICAgICByZXR1cm4gZXNjYXBlSHRtbChodG1sKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGVzY2FwZUh0bWxcbiAgKTtcblxuICAvLyBpZiBlbmFibGUgc3RyaXBJZ25vcmVUYWdCb2R5XG4gIGlmIChzdHJpcElnbm9yZVRhZ0JvZHkpIHtcbiAgICByZXRIdG1sID0gc3RyaXBJZ25vcmVUYWdCb2R5LnJlbW92ZShyZXRIdG1sKTtcbiAgfVxuXG4gIHJldHVybiByZXRIdG1sO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBGaWx0ZXJYU1M7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=